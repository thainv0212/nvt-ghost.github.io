<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>[Kubernetes Best Practice P2] - Health Probes | GMO-Z.com Vietnam Lab Center</title>
    <meta name="description" content="" />
    <meta property="fb:app_id" content="703042457154743" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google-site-verification" content="duCCqsDAWLg3POOfPMr6JiS4R0g0CjouGGM3fhsG0-0" />
    <link rel="shortcut icon" href="../favicon.ico">

    <!-- Stylesheet -->
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap.min.css?v=52156bd6b0" />
    <link rel="stylesheet" type="text/css" href="../assets/css/font-awesome.min.css?v=52156bd6b0" />
    <link rel="stylesheet" type="text/css" href="../assets/css/atom-one-dark.min.css?v=52156bd6b0" />
    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css?v=52156bd6b0" />

    <script type="text/javascript" src="../assets/js/libs/jquery.min.js?v=52156bd6b0"></script>

    <link rel="canonical" href="index.html" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <link rel="amphtml" href="amp/index.html" />
    
    <meta property="og:site_name" content="GMO-Z.com Vietnam Lab Center Technology Blog" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="[Kubernetes Best Practice P2] - Health Probes" />
    <meta property="og:description" content="Mở đầu Khi bạn thiết kế một ứng dụng quan trọng, có tính sẵn sàng cao, khả năng phục hồi là một trong những yếu tố quan trọng nhất cần xem xét. Một ứng dụng có khả năng phục hồi khi nó có thể nhanh chóng phục hồi khi bị" />
    <meta property="og:url" content="https://blog.vietnamlab.vn/kubernetes-best-practice-p2-application-process-management-with-poststart-and-prestop-hook/" />
    <meta property="og:image" content="https://drive.google.com/uc?id&#x3D;1MSt-XfOP5ban7klISB--j86YfZl4bJCr&amp;export&#x3D;download" />
    <meta property="article:published_time" content="2019-11-05T01:13:33.000Z" />
    <meta property="article:modified_time" content="2019-11-06T04:39:02.000Z" />
    <meta property="article:tag" content="kubernetes" />
    <meta property="article:tag" content="Health Probes" />
    <meta property="article:tag" content="Liveness and Readiness Probes" />
    
    <meta property="article:publisher" content="https://www.facebook.com/vietnamlab.vn" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="[Kubernetes Best Practice P2] - Health Probes" />
    <meta name="twitter:description" content="Mở đầu Khi bạn thiết kế một ứng dụng quan trọng, có tính sẵn sàng cao, khả năng phục hồi là một trong những yếu tố quan trọng nhất cần xem xét. Một ứng dụng có khả năng phục hồi khi nó có thể nhanh chóng phục hồi khi bị" />
    <meta name="twitter:url" content="https://blog.vietnamlab.vn/kubernetes-best-practice-p2-application-process-management-with-poststart-and-prestop-hook/" />
    <meta name="twitter:image" content="https://drive.google.com/uc?id&#x3D;1MSt-XfOP5ban7klISB--j86YfZl4bJCr&amp;export&#x3D;download" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="N.X.P" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="kubernetes, Health Probes, Liveness and Readiness Probes" />
    <meta property="og:image:width" content="800" />
    <meta property="og:image:height" content="300" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "GMO-Z.com Vietnam Lab Center Technology Blog",
        "url": "https://blog.vietnamlab.vn/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://blog.vietnamlab.vn/favicon.ico",
            "width": 48,
            "height": 48
        }
    },
    "author": {
        "@type": "Person",
        "name": "N.X.P",
        "image": {
            "@type": "ImageObject",
            "url": "https://drive.google.com/uc?id=1ey3d-hkzyw7sUxoxSNSNVlTPDeoVuhCq&export=download",
            "width": 1738,
            "height": 1412
        },
        "url": "https://blog.vietnamlab.vn/author/phongnx/",
        "sameAs": []
    },
    "headline": "[Kubernetes Best Practice P2] - Health Probes",
    "url": "https://blog.vietnamlab.vn/kubernetes-best-practice-p2-application-process-management-with-poststart-and-prestop-hook/",
    "datePublished": "2019-11-05T01:13:33.000Z",
    "dateModified": "2019-11-06T04:39:02.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "https://drive.google.com/uc?id=1MSt-XfOP5ban7klISB--j86YfZl4bJCr&export=download",
        "width": 800,
        "height": 300
    },
    "keywords": "kubernetes, Health Probes, Liveness and Readiness Probes",
    "description": "Mở đầu\nKhi bạn thiết kế một ứng dụng quan trọng, có tính sẵn sàng cao, khả năng phục\nhồi là một trong những yếu tố quan trọng nhất cần xem xét. Một ứng dụng có khả\nnăng phục hồi khi nó có thể nhanh chóng phục hồi khi bị failures. Các ứng dụng\ncloud-native thường được thiết kế để sử dụng kiến trúc microservice nơi mà mỗi\nthành phần sống trong một container. Để đảm bảo rằng ứng dụng được quản lý bới\nKubernetes có tính sẵn sàng cao, có các patterns cụ thể mà bạn cần tuân theo khi\nthiết kế cluster. ",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://blog.vietnamlab.vn/"
    }
}
    </script>

    <meta name="generator" content="Ghost 3.36" />
    <link rel="alternate" type="application/rss+xml" title="GMO-Z.com Vietnam Lab Center Technology Blog" href="../rss/index.html" />
</head>

<body class="post-template tag-kubernetes tag-health-probes tag-liveness-and-readiness-probes nav-closed">
    <script type="text/javascript" src="../assets/js/app/social.js?v=52156bd6b0"></script>
    <div id="fb-root"></div>

    <div id="header">
        <div id="blog-banner">
    <div class="row">
        <div class="col-md-offset-1 col-md-5">
            <img src="../assets/img/vnlab_logo.jpg?v=52156bd6b0" alt="VNLab Logo">
        </div>
        <div class="col-md-5 text-right coworker">
            <img src="../assets/img/vnlab_coworker.jpg?v=52156bd6b0" alt="VNLab coworker">
        </div>
        <div class="col-md-offset-1"></div>
    </div>
</div>

<nav class="navbar navbar-default">
    <div class="row">
        <div class="col-md-offset-1 col-md-10">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                        <li class="">
                            <a class="https://vietnamlab.vn" href="https://vietnamlab.vn">GMO-Z.com Vietnam Lab Center</a>
                        </li>
                        <li class="">
                            <a class="/tag/news/" href="../tag/news/index.html">Tin tức</a>
                        </li>
                        <li class="">
                            <a class="/" href="../index.html">Blog</a>
                        </li>
                        <li class="">
                            <a class="/tuyen-dung/" href="../tuyen-dung/index.html">★ Tuyển dụng ★</a>
                        </li>
                </ul>

                <ul class="nav navbar-nav navbar-right">
                        <li><a class="subscribe-button icon-feed" href="../rss/index.html">Đăng ký</a></li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <div class="col-md-offset-1"></div>
        <!-- /.container-fluid -->
    </div>
</nav>

    </div>

    <div id="body" class="row">
        
<div class="col-lg-offset-1 col-lg-7">
        <article class="post tag-kubernetes tag-health-probes tag-liveness-and-readiness-probes js-toc-content">
            <div class="post-header">
                <h2 class="post-title"><a href="index.html">[Kubernetes Best Practice P2] - Health Probes</a></h2>
            </div>

            <div class="post-meta">
                <div class="post-date" datetime="2019-11-05">
                    <i class="fa fa-clock-o" aria-hidden="true"></i> 05 November 2019
                </div>
                <div class="post-tag">
                    <i class="fa fa-tags" aria-hidden="true"></i> <a href="../tag/kubernetes/index.html">kubernetes</a>, <a href="../tag/health-probes/index.html">Health Probes</a>, <a href="../tag/liveness-and-readiness-probes/index.html">Liveness and Readiness Probes</a>
                </div>
            </div>

            <div class="post-featured post-featured-single">
                <div class="post-featured-img">
                        <img src="https://drive.google.com/uc?id&#x3D;1MSt-XfOP5ban7klISB--j86YfZl4bJCr&amp;export&#x3D;download" alt="[Kubernetes Best Practice P2] - Health Probes">
                </div>

                <div class="post-author">
                </div>

                <div class="post-share">
                    <div class="share-button">
                        <div class="fb-share-button" data-href="/kubernetes-best-practice-p2-application-process-management-with-poststart-and-prestop-hook/" data-layout="button" data-size="large" data-mobile-iframe="true">
                        </div>
                    </div>

                    <div class="share-button">
                        <a class="twitter-share-button" data-size="large" href="https://twitter.com/intent/tweet?text=%5BKubernetes%20Best%20Practice%20P2%5D%20-%20Health%20Probes">
                            Tweet
                        </a>
                    </div>
                </div>
            </div>

            <section class="post-content">
                <!--kg-card-begin: markdown--><h3 id="mu">Mở đầu</h3>
<p>Khi bạn thiết kế một ứng dụng quan trọng, có tính sẵn sàng cao, khả năng phục hồi là một trong những yếu tố quan trọng nhất cần xem xét. Một ứng dụng có khả năng phục hồi khi nó có thể nhanh chóng phục hồi khi bị failures. Các ứng dụng cloud-native thường được thiết kế để sử dụng kiến trúc microservice nơi mà mỗi thành phần sống trong một container. Để đảm bảo rằng ứng dụng được quản lý bới Kubernetes có tính sẵn sàng cao, có các patterns cụ thể mà bạn cần tuân theo khi thiết kế cluster. Một trong số các patterns đó là Health Probe Pattern. Health Probe Pattern định nghĩa cách ứng dụng báo cáo trạng thái sức khỏe của mình cho Kubernetes. Trạng thái sức khỏe không chỉ là về việc pod có hoạt động hay không mà còn có khả năng nhận và trả lời các request hay không. Khi Kubernetes hiểu rõ hơn về tình trạng sức khỏe của pod, nó có thể đưa ra các quyết định thông minh hơn về traffic-routing và load balancing. Do đó, áp dụng Nguyên tắc High Observability Principle (HOP) đảm bảo rằng mọi request mà ứng dụng của bạn nhận được đều có thể phản hồi kịp thời.</p>
<h3 id="highobservabilityprinciplehop">HIGH OBSERVABILITY PRINCIPLE (HOP)</h3>
<p>Nguyên tắc này nói như thế nào: Containers cung cấp một cách thống nhất để đóng gói và chạy các ứng dụng bằng cách xem chúng như black box. Những bất cứ container nào muốn trở thành cloud-native citizen phải cung cấp API cho việc check health và các mục đích khác.<br>
Đây là điều kiện tiên quyết cơ bản để automating container updates và  life cycles theo cách thống nhất, từ đó cải thiện khả năng phục hồi và trải nghiệm người dùng của hệ thống.<br>
Trong điều kiện thực tế, ở mức tối thiểu, ứng dụng được đóng gói của bạn phải cung cấp API cho các loại health checks như liveness và readiness. Một ứng dụng cloud-native được thiết kế tốt cũng nên ghi log các sự kiện thiết yếu vào các kênh error standard (STDERR) và standard output (STDOUT). Hơn nữa, một helper service như filebeat, logstash hoặc fluentd ships các nhật ký đó đến centralized monitoring, như Prometheus và log aggregation system chẳng hạn như ELK stack. Sơ đồ sau minh họa cách ứng dụng cloud-native tuân theo Health Probe Pattern và High Observability Principle.<br>
<img src="https://drive.google.com/uc?id=1gkEiJrCABhoCv4vlzUjiL7tcckV1iHTE&amp;export=download" alt="uc?id=1gkEiJrCABhoCv4vlzUjiL7tcckV1iHTE&amp;export=download"><br>
<em>url: <a href="https://www.redhat.com/en/resources/cloud-native-container-design-whitepaper">https://www.redhat.com/en/resources/cloud-native-container-design-whitepaper</a></em><br>
Mình sẽ đưa ra một ví dụ cho dễ hiểu, nếu có bạn nào đã tìm hiểu về Elasticsearch ắt sẽ biết ES cung cấp API cho việc check health.<br>
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-health.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-health.html</a><br>
Trong Kubernetes chúng ta sử dụng Health Check và phương thức http/https để gọi đến API này để kiểm tra xem container ES đã hoặt động Ok chưa. cách config trông như bên dưới:</p>
<pre><code>        readinessProbe:
          initialDelaySeconds: 180
          periodSeconds: 10
          failureThreshold: 100
          timeoutSeconds: 5
          httpGet:
            scheme: HTTPS
            path: /_cluster/health
            port: 9200
            httpHeaders:
            - name: Authorization
              value: Basic KJhKykjHJhb654kLKhkjh4mhjhGKJGHK
</code></pre>
<h3 id="kuberneteshealthcheck">Kubernetes Health Check</h3>
<p>Kubernetes cung cấp các cách health check (Probes)cho container.</p>
<ul>
<li>LivenessProbe</li>
<li>ReadinessProbe</li>
</ul>
<p>Đầu tiên chúng ta sẽ cùng xem các probes này hoạt động ở vị trí nào trong pod lifcyle.<br>
<img src="https://drive.google.com/uc?id=1wwKFC3wBhaISWa0kNEEPKlB-G4PAv6YO&amp;export=download" alt="uc?id=1wwKFC3wBhaISWa0kNEEPKlB-G4PAv6YO&amp;export=download"><br>
<em>url: <a href="https://blog.francium.tech/lifecycle-of-a-kubernetes-pod-1214199ddd2c">https://blog.francium.tech/lifecycle-of-a-kubernetes-pod-1214199ddd2c</a></em><br>
OK! Bây giờ chúng ta sẽ cùng tìm hiểu xem lợi ích của 2 probes này.</p>
<h3 id="kuberneteslivenessandreadinessprobes">Kubernetes Liveness and Readiness Probes</h3>
<p>kubelet sử dụng liveness probes để biết khi nào nên khởi động lại Container. Ví dụ như liveness probes có thể bắt được một deadlock, điều đó làm cho Container không thể hoặt động được. Khởi động lại Container trong các trường hợp như vậy giúp ứng dụng available hơn.<br>
kubelet sử dụng readiness probes để biết được khi nào Container có thể accepting traffic. 1 Pod được coi là ready khi tất cả các container của nó ready. Một ví dụ sử dụng tín hiệu này là để control các Pods được sử dụng ở các dịch vụ Backend. Khi Pod chưa ready, nó sẽ xóa khỏi bộ cân bằng tải của Service.<br>
Ví dụ: nếu một container loads một lượng lớn cache khi khởi động và mất vài phút để khởi động, bạn không muốn gửi requests đến container này cho đến khi nó ready, hoặc các request fail để bạn route các request đó đến các Pod khác, cái đó được gọi là khả năng phục vụ request. Cụ thể hơn trong dự án của mình, Mình có 3 Pod Elasticsearch phục vụ cho mục đích lưu trữ log (Fluetd gửi log đến ES realtime). Khi thực hiện hiện rolling update cho Elastisearch, mình phải đặt config readinessProbe để kiểm tra tình trạng health như thế nào thông qua việc request đến path /_cluster/health nếu chưa Ok thì mình chưa cho Pod đó nhận request (nhận log từ fluentd).<br>
Kubernetes theo dõi trạng thái của Pods bằng một trong những bộ điều khiển của nó (Deployments, ReplicaSets, DaemonSets, StatefulSets, etc.). Nếu bộ điều khiển phát hiện ra rằng pod bị crashed vì một lý do nào đó, nó sẽ cố gắng khởi động lại hoặc đặt lại nó cho một node khác. Tuy nhiên, một Pod có thể báo cáo rằng nó đã up và running; tuy nhiên, nó không hoạt động. Mình sẽ lấy một ví dụ: bạn có một ứng dụng sử dụng Apache làm web server. Bạn đã triển khai nó trên nhiều Pods trong cluster của bạn. Do thư viện bị cấu hình sai, tất cả các request cho ứng dụng này bị response với mã HTTP 500 (Internal Server Error). Khi Deployment kiểm tra trạng thái của Pod, nó phát hiện ra rằng Pod đang running. Nhưng nó không phải là những gì khách hàng của bạn nghĩ. Mình sẽ mô tả tình huống không mong muốn này như sau:<br>
<img src="https://drive.google.com/uc?id=1N4_bg1GGtQNdelnUS4om1Qsx4BM9IoVt&amp;export=download" alt="uc?id=1N4_bg1GGtQNdelnUS4om1Qsx4BM9IoVt&amp;export=download"><br>
<em>url: <a href="https://www.magalix.com/blog/kubernetes-and-containers-best-practices-health-probes">https://www.magalix.com/blog/kubernetes-and-containers-best-practices-health-probes</a></em></p>
<p>Trong ví dụ trên, Kubernetes đang thực hiện quá trình health check. Trong loại kiểm tra này, kubelet liên tục thăm dò container. Nếu nó phát hiện ra rằng process không hoạt động, nó sẽ khởi động lại. Nếu lỗi được khắc phục chỉ bằng cách khởi động lại ứng dụng và nếu chương trình được thiết kế để tự tắt khi có bất kỳ lỗi nào xảy ra, thì quá trình health checks là tất cả những gì bạn cần tuân theo HOP và Health Probe Pattern. Thật không may, không phải tất cả các lỗi biến mất bằng cách khởi động lại. Vì lý do này, Kubernetes cung cấp hai cách triệt để hơn để phát hiện các lỗi của pod: liveness probe và readiness probe.</p>
<p>Với chỉ vài dòng config trong file YAML, bạn có thể bật chế độ auto heaing cho Kubernetes Pod tốt hơn. Nếu chúng ta kết hợp đúng đắn liveness và readiness probes sẽ giúp việc Deployment trong Kubernetes đạt được:</p>
<ul>
<li>Cho phép Deployment zero downtime</li>
<li>Ngăn chặn deployment mà images có vấn đề</li>
<li>Đảm bảo rằng các container failed được tự động khởi động lại</li>
</ul>
<p>Các bạn có thể tham khảo thêm ở tài liệu chính thức của Kubernetes <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-probes/">tại đây</a><br>
Cả 2 Health Probes này cơ bản có syntax cự kỳ đơn giản khá giống nhau, trông như bên dưới:</p>
<pre><code>livenessProbe:
  httpGet:
    path: /monitoring/health
    port: 3000
</code></pre>
<h3 id="livenessprobes">Liveness Probes</h3>
<p>Giả sử rằng một Pod đang chạy ứng dụng của chúng ta bên trong một containr, nhưng vì lý do nào đó như là memory leak, cpu usage, application deadlock v.v.. ứng dụng không đáp ứng các requestscủa chúng ta và bị kẹt trong trạng thái lỗi.<br>
Liveness probe kiểm tra sức khỏe của container như mình đã nói, và nếu vì lý do nào đó, Liveness probe không thành công, nó sẽ khởi động lại container. Chúng ta có thể hình dung hoạt động của Liveness probe như hình bên dưới:<br>
<img src="https://drive.google.com/uc?id=1u104NiIkBhhkaA8oDeVZWw2vqXWj7v0g&amp;export=download" alt="uc?id=1u104NiIkBhhkaA8oDeVZWw2vqXWj7v0g&amp;export=download"><br>
<em>url: <a href="https://cloud.google.com/blog/products/gcp/kubernetes-best-practices-setting-up-health-checks-with-readiness-and-liveness-probes">https://cloud.google.com/blog/products/gcp/kubernetes-best-practices-setting-up-health-checks-with-readiness-and-liveness-probes</a></em><br>
Hoặc<br>
<img src="https://drive.google.com/uc?id=13lTFs0O3wUs4dmOYOs_c2drbVUgvgx_r&amp;export=download" alt="uc?id=13lTFs0O3wUs4dmOYOs_c2drbVUgvgx_r&amp;export=download"><br>
<em>url:<a href="https://bcho.tistory.com/tag/liveness%20probe">https://bcho.tistory.com/tag/liveness probe</a></em></p>
<h3 id="readinessprobes">Readiness Probes</h3>
<p>Hãy để tưởng tượng rằng ứng dụng của bạn mất một phút để warm up và start.<br>
Dịch vụ của bạn sẽ không hoạt động cho đến khi nó up và running, mặc dù process đã hoặt động. Nghĩa là mặc dù thấy đã chạy rồi nhưng thực tế là hoạt động chưa OK. Hoặc bạn cũng gặp vấn đề khi scale up deployment để có thêm nhiều bản sao. một Pod (bảo sao) mới không nên nhận traffic cho đến khi nó thật sự sẵn sàng, nhưng theo mặc định thì Kubernetes sẽ gửi traffic ngay khi container starts.<br>
Bằng cách sử dụng readiness probe, Kubernetes sẽ đợi cho đến khi ứng dụng được khởi động hoàn toàn (ở trạng thái có thể nhận traffic) trước khi cho phép service gửi traffic đến Pod mới.<br>
Chúng ta có thể hình dung mô hình bên dưới:<br>
<img src="https://drive.google.com/uc?id=1mzbw5Bo1Ep5888BZzB8NdQ0ilBxzjPVw&amp;export=download" alt="uc?id=1mzbw5Bo1Ep5888BZzB8NdQ0ilBxzjPVw&amp;export=download"><br>
<em>url: <a href="https://cloud.google.com/blog/products/gcp/kubernetes-best-practices-setting-up-health-checks-with-readiness-and-liveness-probes">https://cloud.google.com/blog/products/gcp/kubernetes-best-practices-setting-up-health-checks-with-readiness-and-liveness-probes</a></em><br>
Hoặc<br>
<img src="https://drive.google.com/uc?id=15WojeD_PfY2sJXDtDUke3keWvE-twBxM&amp;export=download" alt="uc?id=15WojeD_PfY2sJXDtDUke3keWvE-twBxM&amp;export=download"><br>
<em>url:<a href="https://bcho.tistory.com/tag/liveness%20probe">https://bcho.tistory.com/tag/liveness probe</a></em></p>
<h3 id="cccchdefineprobe">Các cách define Probe</h3>
<p>Có 3 cách để định nghĩa Probe</p>
<ul>
<li>exec</li>
<li>httpGet</li>
<li>tcpSocket</li>
</ul>
<h4 id="exec">exec</h4>
<p>exec sẽ thực thi một hoặc nhiều command bên trong container. Khi command kết thúc, nếu status trả về là 0 thì healthy, khác 0 thì là unhealthy.</p>
<pre><code>  exec:
    command:
      - find
      - alive.txt
      - -mmin
</code></pre>
<h4 id="httpget">httpGet</h4>
<p>httpGet phát hành 1 request HTTP GET. Nếu response trả về có mã lớn hơn hoặc bằng 200 và nhỏ hơn 400 thì xem như thành công và là healthy. Nếu không thì nó được coi là unhealthy.</p>
<ul>
<li>host: Host name để kết nối đến, mặc định là pod IP. Bạn cũng có thể muốn set tham số &quot;Host&quot; trong httpHeaders.</li>
<li>scheme: Scheme dùng để kết nối đến host (HTTP hoặc HTTPS). Defaults là HTTP.</li>
<li>path: Đường dẫn để truy cập đến HTTP server.</li>
<li>httpHeaders: Custom headers để set trong request. HTTP cho phép các headers lặp lại.</li>
<li>port: Tên hoặc số port để truy cập đến container. Số này phải nằm trong khoảng 1 đến 65535.</li>
</ul>
<p>Ví dụ:</p>
<pre><code>httpGet:
  path: /healthz
  port: 8080
  httpHeaders:
  - name: Host
    value: www.example.local
</code></pre>
<h4 id="tcpsocket">tcpSocket</h4>
<p>Loại thứ 3 là TCP Socket. Với kiểu config này kubelet sẽ cố gắng mở một kết nối socket đến container của bạn trên port chỉ định. Nếu nó có thể thiết lập một connect thì container của bạn được xem là healthy, ngược lại thì là thất bại.</p>
<ul>
<li>host: chỉ định địa chỉ lên kết, mặc định là Pod IP</li>
<li>port: chỉ định Port khi thực hiện request. Có thể sử dụng sô port hoặc port name</li>
</ul>
<p>Ví dụ:</p>
<pre><code>tcpSocket:
  port: 6379
</code></pre>
<h4 id="mtsparameter">Một số parameter</h4>
<p>Probes có một số tham số mà bạn có thể sử dụng để kiểm soát chính xác hơn hành vi của liveness và readiness checks:</p>
<ul>
<li>initialDelaySeconds: Số giây sau khi container started trước khi liveness hoặc readiness probes thực hiện check. Nghĩa là container start xong, cách bao nhiêu giây thì mới thực hiện check.</li>
<li>periodSeconds: Tần suất (tính bằng giây) để thực hiện probes. Mặc định là 10 giây. Giá trị tối thiểu là 1.</li>
<li>timeoutSeconds: Số giây sau khi probes times out. Mặc định là 1 giây. Giá trị tối thiểu là 1.</li>
<li>successThreshold: Số lần success liên tiếp của probes sau khi failed, nếu nó đạt con số này sẽ được coi là thành công, không thì sẽ thực hiện check tiếp. Mặc định là 1. Phải là 1 cho liveness. Giá trị tối thiểu là 1.</li>
<li>failureThreshold: Khi một Pod start và probe thất bại, Kubernetes sẽ thử một số lần failureThreshold trước khi bỏ cuộc. Từ bỏ trong trường hợp liveness probe có nghĩa là khởi động lại container. Trong trường hợp readiness probe, Pod sẽ được đánh dấu Unready. Mặc định là 3. Giá trị tối thiểu là 1.</li>
</ul>
<h3 id="livenessprobeexample">LivenessProbe Example</h3>
<p>Chuẩn bị file Manifest</p>
<pre><code>#liveness-check.yaml
apiVersion: v1
kind: Pod
metadata:
  name: liveness-check
spec:
  containers:
  - image: nginx
    name: nginx
    livenessProbe:
      httpGet:
        port: 80
        path: /
      failureThreshold: 5
      periodSeconds: 5
</code></pre>
<pre><code>[vagrant@ci health-probes]$ kubectl apply -f liveness-check.yaml -n kuber-best-practice
pod &quot;liveness-check&quot; created
</code></pre>
<pre><code>[vagrant@ci health-probes]$ kubectl get pods -n kuber-best-practice
NAME             READY     STATUS    RESTARTS   AGE
liveness-check   1/1       Running   0          58s
[vagrant@ci health-probes]$ kubectl describe po/liveness-check -n kuber-best-practice
Name:         liveness-check
Namespace:    kuber-best-practice
Node:         192.168.33.50/192.168.33.50
Start Time:   Mon, 23 Sep 2019 11:24:46 +0900
Labels:       &lt;none&gt;
Annotations:  kubectl.kubernetes.io/last-applied-configuration={&quot;apiVersion&quot;:&quot;v1&quot;,&quot;kind&quot;:&quot;Pod&quot;,&quot;metadata&quot;:{&quot;annotations&quot;:{},&quot;name&quot;:&quot;liveness-check&quot;,&quot;namespace&quot;:&quot;kuber-best-practice&quot;},&quot;spec&quot;:{&quot;containers&quot;:[{&quot;image&quot;:...
Status:       Running
IP:           10.42.0.62
Containers:
  nginx:
    Container ID:   docker://cb1042b72ebe8e504d8bd8a56db033694a6c6c9a85f869247586255c62cbf901
    Image:          nginx
    Image ID:       docker-pullable://nginx@sha256:9688d0dae8812dd2437947b756393eb0779487e361aa2ffbc3a529dca61f102c
    Port:           &lt;none&gt;
    Host Port:      &lt;none&gt;
    State:          Running
      Started:      Mon, 23 Sep 2019 11:24:56 +0900
    Ready:          True
    Restart Count:  0
    Liveness:       http-get http://:80/ delay=0s timeout=1s period=5s #success=1 #failure=5
    Environment:    &lt;none&gt;
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-tml4h (ro)
Conditions:
  Type           Status
  Initialized    True
  Ready          True
  PodScheduled   True
Volumes:
  default-token-tml4h:
    Type:        Secret (a volume populated by a Secret)
    SecretName:  default-token-tml4h
    Optional:    false
QoS Class:       BestEffort
Node-Selectors:  &lt;none&gt;
Tolerations:     node.kubernetes.io/not-ready:NoExecute for 300s
                 node.kubernetes.io/unreachable:NoExecute for 300s
Events:
  Type    Reason                 Age   From                    Message
  ----    ------                 ----  ----                    -------
  Normal  Scheduled              1m    default-scheduler       Successfully assigned liveness-check to 192.168.33.50
  Normal  SuccessfulMountVolume  1m    kubelet, 192.168.33.50  MountVolume.SetUp succeeded for volume &quot;default-token-tml4h&quot;
  Normal  Pulling                1m    kubelet, 192.168.33.50  pulling image &quot;nginx&quot;
  Normal  Pulled                 1m    kubelet, 192.168.33.50  Successfully pulled image &quot;nginx&quot;
  Normal  Created                1m    kubelet, 192.168.33.50  Created container
  Normal  Started                1m    kubelet, 192.168.33.50  Started container
</code></pre>
<p>Chúng ta để ý chổ này</p>
<pre><code>    Liveness:       http-get http://:80/ delay=0s timeout=1s period=5s #success=1 #failure=5
</code></pre>
<p>Vậy là chúng ta đã setting cho Liveness probe Ok rồi. Bây giờ mình sẽ thử xóa file /usr/share/nginx/html/index.html trong container xem sao.</p>
<pre><code>[vagrant@ci health-probes]$ kubectl exec liveness-check -- rm /usr/share/nginx/html/index.html -n kuber-best-practice
</code></pre>
<pre><code>[vagrant@ci health-probes]$ kubectl describe po/liveness-check -n kuber-best-practice | tail
  Type     Reason                 Age                From                    Message
  ----     ------                 ----               ----                    -------
  Normal   Scheduled              15m                default-scheduler       Successfully assigned liveness-check to 192.168.33.50
  Normal   SuccessfulMountVolume  15m                kubelet, 192.168.33.50  MountVolume.SetUp succeeded for volume &quot;default-token-tml4h&quot;
  Warning  Unhealthy              42s (x5 over 1m)   kubelet, 192.168.33.50  Liveness probe failed: HTTP probe failed with statuscode: 403
  Normal   Pulling                41s (x2 over 15m)  kubelet, 192.168.33.50  pulling image &quot;nginx&quot;
  Normal   Killing                41s                kubelet, 192.168.33.50  Killing container with id docker://nginx:Container failed liveness probe.. Container will be killed and recreated.
  Normal   Pulled                 36s (x2 over 15m)  kubelet, 192.168.33.50  Successfully pulled image &quot;nginx&quot;
  Normal   Created                36s (x2 over 15m)  kubelet, 192.168.33.50  Created container
  Normal   Started                36s (x2 over 15m)  kubelet, 192.168.33.50  Started container
</code></pre>
<p>Các bạn có thể thấy Probe thất bại và hiển thị thông báo &quot;Liveness probe failed: HTTP probe failed with statuscode: 403&quot; tuy nhiên chỉ trong chốc lát, container đã được khởi động lại bình thường.</p>
<h3 id="readinessprobesexample">Readiness Probes Example</h3>
<p>Chuẩn bị file Manifest</p>
<pre><code>#readiness-check.yaml
apiVersion: v1
kind: Pod
metadata:
  name: readiness-check
  labels:
    app: nginx
spec:
  containers:
  - image: nginx
    name: nginx
    readinessProbe:
      httpGet:
        port: 80
        path: /
      failureThreshold: 1
      periodSeconds: 1

---
apiVersion: v1
kind: Service
metadata:
  name: readiness-check-svc
spec:
  selector:
    app: nginx
  ports:
  - port: 80

</code></pre>
<pre><code>[vagrant@ci health-probes]$ kubectl apply -f readiness-check.yaml -n kuber-best-practice
pod &quot;readiness-check&quot; created
service &quot;readiness-check-svc&quot; created
[vagrant@ci health-probes]$ kubectl get all -n kuber-best-practice
NAME                  READY     STATUS    RESTARTS   AGE
pod/readiness-check   1/1       Running   0          13s

NAME                          TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)   AGE
service/readiness-check-svc   ClusterIP   10.43.175.77   &lt;none&gt;        80/TCP    1m
</code></pre>
<pre><code>[vagrant@ci health-probes]$ kubectl describe po/readiness-check -n kuber-best-practice
Name:         readiness-check
Namespace:    kuber-best-practice
Node:         192.168.33.51/192.168.33.51
Start Time:   Mon, 23 Sep 2019 11:49:49 +0900
Labels:       app=nginx
Annotations:  kubectl.kubernetes.io/last-applied-configuration={&quot;apiVersion&quot;:&quot;v1&quot;,&quot;kind&quot;:&quot;Pod&quot;,&quot;metadata&quot;:{&quot;annotations&quot;:{},&quot;labels&quot;:{&quot;app&quot;:&quot;nginx&quot;},&quot;name&quot;:&quot;readiness-check&quot;,&quot;namespace&quot;:&quot;kuber-best-practice&quot;},&quot;spec...
Status:       Running
IP:           10.42.1.7
Containers:
  nginx:
    Container ID:   docker://145a03bb80ed336064ca00219223a013b638c6ebd5a80f42a04e0981c8373c03
    Image:          nginx
    Image ID:       docker-pullable://nginx@sha256:9688d0dae8812dd2437947b756393eb0779487e361aa2ffbc3a529dca61f102c
    Port:           &lt;none&gt;
    Host Port:      &lt;none&gt;
    State:          Running
      Started:      Mon, 23 Sep 2019 11:49:56 +0900
    Ready:          True
    Restart Count:  0
    Readiness:      http-get http://:80/ delay=0s timeout=1s period=1s #success=1 #failure=1
    Environment:    &lt;none&gt;
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-tml4h (ro)
Conditions:
  Type           Status
  Initialized    True
  Ready          True
  PodScheduled   True
Volumes:
  default-token-tml4h:
    Type:        Secret (a volume populated by a Secret)
    SecretName:  default-token-tml4h
    Optional:    false
QoS Class:       BestEffort
Node-Selectors:  &lt;none&gt;
Tolerations:     node.kubernetes.io/not-ready:NoExecute for 300s
                 node.kubernetes.io/unreachable:NoExecute for 300s
Events:
  Type    Reason                 Age   From                    Message
  ----    ------                 ----  ----                    -------
  Normal  Scheduled              2m    default-scheduler       Successfully assigned readiness-check to 192.168.33.51
  Normal  SuccessfulMountVolume  2m    kubelet, 192.168.33.51  MountVolume.SetUp succeeded for volume &quot;default-token-tml4h&quot;
  Normal  Pulling                2m    kubelet, 192.168.33.51  pulling image &quot;nginx&quot;
  Normal  Pulled                 2m    kubelet, 192.168.33.51  Successfully pulled image &quot;nginx&quot;
  Normal  Created                2m    kubelet, 192.168.33.51  Created container
  Normal  Started                2m    kubelet, 192.168.33.51  Started container

</code></pre>
<p>Vậy là ReadinessProbe đã được setting OK. Bây giờ ta cũng làm như khi nãy, xóa file /usr/share/nginx/html/index.html trong container</p>
<pre><code>kubectl exec readiness-check -n kuber-best-practice -- rm /usr/share/nginx/html/index.html
</code></pre>
<p>Kiểm tra xem tình trạng Pod thế nào</p>
<pre><code>[vagrant@ci health-probes]$ kubectl describe po/readiness-check -n kuber-best-practice | tail
Events:
  Type     Reason                 Age                 From                    Message
  ----     ------                 ----                ----                    -------
  Normal   Scheduled              17m                 default-scheduler       Successfully assigned readiness-check to 192.168.33.51
  Normal   SuccessfulMountVolume  17m                 kubelet, 192.168.33.51  MountVolume.SetUp succeeded for volume &quot;default-token-tml4h&quot;
  Normal   Pulling                16m                 kubelet, 192.168.33.51  pulling image &quot;nginx&quot;
  Normal   Pulled                 16m                 kubelet, 192.168.33.51  Successfully pulled image &quot;nginx&quot;
  Normal   Created                16m                 kubelet, 192.168.33.51  Created container
  Normal   Started                16m                 kubelet, 192.168.33.51  Started container
  Warning  Unhealthy              10s (x23 over 32s)  kubelet, 192.168.33.51  Readiness probe failed: HTTP probe failed with statuscode: 403
</code></pre>
<p>Vậy là  Readiness probe failed và chắc chắn chúng ta sẽ không access được đến service.<br>
Bây giờ để ReadinessProbe check Ok thì ta tiến hành tạo lại file /usr/share/nginx/html/index.html</p>
<pre><code>$ kubectl exec readiness-check -n kuber-best-practice -- sh -c 'echo ok &gt; /usr/share/nginx/html/index.html'
</code></pre>
<p>Kiểm tra lại service bạn sẽ thấy không còn lỗi connect nữa. Như vậy chúng ta có thể thấy, Việc rooting của Service sẽ loại những Container nào có ReadinessProbe Unhealthy khỏi đối tượng rooting. Và khi nó Healthy trở lại thì Service sẽ tiến hành rooting đến Pod đó.</p>
<h3 id="sosnhlivenessandreadinessprobes">So sánh Liveness and Readiness Probes</h3>
<p>Chúng ta sẽ so sánh một chút về 2 loại probes này.<br>
<img src="https://drive.google.com/uc?id=13EQ8halhlBuyJ99317qOM5UzYCCvu0KR&amp;export=download" alt="uc?id=13EQ8halhlBuyJ99317qOM5UzYCCvu0KR&amp;export=download"><br>
<em>url: <a href="https://www.weave.works/blog/resilient-apps-with-liveness-and-readiness-probes-in-kubernetes">https://www.weave.works/blog/resilient-apps-with-liveness-and-readiness-probes-in-kubernetes</a></em></p>
<h4 id="khinothsdnglivenessvreadinessprobes">Khi nào thì sử dụng liveness và readiness probes</h4>
<h5 id="livenessusecase">Liveness use case</h5>
<p>Như đã nói phía trên, các liveness probe được sử dụng để chẩn đoán các container unhealthy. Chúng ta có thể phát hiện sự cố trong dịch vụ của chúng ta khi nó không thể hoạt động OK và sẽ khởi động lại container khi có có vấn đề theo restart policy, hy vọng loại bỏ sự cố dịch vụ.<br>
Ví dụ, bạn có thể muốn bao gồm một liveness probe Exec bên trong container của mình để phát hiện khi một ứng dụng đã chuyển sang trạng thái bị hỏng và không thể phục hồi trừ khi nó khởi động lại:</p>
<h5 id="readinessusecase">readiness use case</h5>
<p>Mặt khác, readiness probe rất hữu ích trong trường hợp ứng dụng tạm thời không thể phục vụ traffic. Ví dụ, có thể ứng dụng cần tải một tập dữ liệu lớn hoặc một số tệp cấu hình trong giai đoạn khởi động. Mặc dù dịch vụ này đang running nhưng nó chưa fully available và trong trường hợp này, Kubernetes có thể gặp khó khăn khi scaling up và có thể thất bại. Với một readiness probe, Kubernetes đợi cho đến khi dịch vụ được khởi động hoàn toàn trước khi nó gửi traffic truy cập đến bản sao mới.<br>
Ví dụ về Elasticsearch cluster là một điển hình, khi các log được gửi đến liên tục, việc rolling update sẽ tắt và bật các Pod, cho đến ES Pod được khởi động hoàn toàn và có thể nhận traffic, trong thời gian này Service sẽ đưa Pod này ra khỏi đổi tượng nhận traffic.</p>
<h3 id="ktlun">Kết luận</h3>
<h3 id="tiliuthamkho">Tài liệu tham khảo</h3>
<ol>
<li><a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-probes/">https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-probes/</a></li>
<li><a href="https://www.magalix.com/blog/kubernetes-and-containers-best-practices-health-probes">https://www.magalix.com/blog/kubernetes-and-containers-best-practices-health-probes</a></li>
<li><a href="https://cstoku.dev/posts/2018/k8sdojo-10/">https://cstoku.dev/posts/2018/k8sdojo-10/</a></li>
<li><a href="https://blog.francium.tech/lifecycle-of-a-kubernetes-pod-1214199ddd2c">https://blog.francium.tech/lifecycle-of-a-kubernetes-pod-1214199ddd2c</a></li>
<li><a href="https://cloud.google.com/blog/products/gcp/kubernetes-best-practices-setting-up-health-checks-with-readiness-and-liveness-probes">https://cloud.google.com/blog/products/gcp/kubernetes-best-practices-setting-up-health-checks-with-readiness-and-liveness-probes</a></li>
<li><a href="https://www.weave.works/blog/resilient-apps-with-liveness-and-readiness-probes-in-kubernetes">https://www.weave.works/blog/resilient-apps-with-liveness-and-readiness-probes-in-kubernetes</a></li>
<li><a href="https://bcho.tistory.com/tag/liveness%20probe">https://bcho.tistory.com/tag/liveness probe</a></li>
<li><a href="https://www.redhat.com/en/resources/cloud-native-container-design-whitepaper">https://www.redhat.com/en/resources/cloud-native-container-design-whitepaper</a></li>
<li><a href="https://viblo.asia/p/zero-downtime-voi-kubernetes-p1-truly-stateless-application-ORNZqjErl0n?fbclid=IwAR0HEFTSHxyRpFq_3DXqwjXJxt-iaUsWbt41EtBOgbeqmkxtVcqpALxn5NE">https://viblo.asia/p/zero-downtime-voi-kubernetes-p1-truly-stateless-application-ORNZqjErl0n?fbclid=IwAR0HEFTSHxyRpFq_3DXqwjXJxt-iaUsWbt41EtBOgbeqmkxtVcqpALxn5NE</a></li>
<li><a href="https://medium.com/@AADota/kubernetes-liveness-and-readiness-probes-difference-1b659c369e17">https://medium.com/@AADota/kubernetes-liveness-and-readiness-probes-difference-1b659c369e17</a></li>
<li><a href="https://medium.com/spire-labs/utilizing-kubernetes-liveness-and-readiness-probes-to-automatically-recover-from-failure-2fe0314f2b2e">https://medium.com/spire-labs/utilizing-kubernetes-liveness-and-readiness-probes-to-automatically-recover-from-failure-2fe0314f2b2e</a></li>
<li><a href="https://itnext.io/exploring-kubernetes-liveness-and-readiness-probes-e9bbc7d899be">https://itnext.io/exploring-kubernetes-liveness-and-readiness-probes-e9bbc7d899be</a></li>
<li><a href="https://www.replex.io/blog/kubernetes-in-production-readiness-checklist-and-best-practiceshttps://blog.colinbreck.com/kubernetes-liveness-and-readiness-probes-how-to-avoid-shooting-yourself-in-the-foot/">https://www.replex.io/blog/kubernetes-in-production-readiness-checklist-and-best-practiceshttps://blog.colinbreck.com/kubernetes-liveness-and-readiness-probes-how-to-avoid-shooting-yourself-in-the-foot/</a></li>
</ol>
<!--kg-card-end: markdown-->
            </section>

            <div class="post-footer">
                <div class="share-button">
                    <div class="fb-share-button" data-href="/kubernetes-best-practice-p2-application-process-management-with-poststart-and-prestop-hook/" data-layout="button_count" data-size="large" data-mobile-iframe="true">
                    </div>
                </div>

                <div class="share-button">
                    <a class="twitter-share-button" data-size="large" href="https://twitter.com/intent/tweet?text=%5BKubernetes%20Best%20Practice%20P2%5D%20-%20Health%20Probes">
                        Tweet
                    </a>
                </div>

                <div class="share-button">
                    <div class="g-plusone" data-href="/kubernetes-best-practice-p2-application-process-management-with-poststart-and-prestop-hook/"></div>
                </div>
            </div>
            <div id="widget-for-reem-10-1"></div><script src="https://reem.vn/reem.js?m=10"></script>
        </article>


        <div class="post-comments">
            <div class="fb-comments" data-href="https://blog.vietnamlab.vn/kubernetes-best-practice-p2-application-process-management-with-poststart-and-prestop-hook/" data-numposts="10" data-order-by="reverse_time" data-width="100%"></div>
        </div>
</div>
<div class="col-lg-3">
    <div id="sidebar">

    <gcse:search></gcse:search>

    <div class='sidebar-box'>
        <div id="widget-for-reem-4-1"></div><script src="https://163.44.192.76/rem.js?m=4"></script>
    </div>
    <div class="sidebar-box">
        <div class="sidebar-title h2">Tuyển dụng</div>
        <div class="sidebar-content">
          <a class="title" href="https://blog.vietnamlab.vn/tuyen-dung">
            <img
              style="max-width: 100%"
              src="https://drive.google.com/uc?id=1aYKdTvr-4CYterc6pPPBYoFezghrkGZf"
              alt="Tuyển dụng">
          </a>
        </div>
    </div>

    <div class="sidebar-box">
        <div class="sidebar-title h2">Facebook</div>
        <div class="sidebar-content">
            <div class="fb-page" data-href="https://www.facebook.com/vietnamlab.vn" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-width="500" data-show-facepile="true">
                <blockquote cite="https://www.facebook.com/vietnamlab.vn" class="fb-xfbml-parse-ignore">
                    <a href="https://www.facebook.com/vietnamlab.vn">GMO-Z.com Vietnam Lab Center</a>
                </blockquote>
            </div>
        </div>
    </div>

    <div class="sidebar-box">
        <div class="sidebar-title h2">Mục lục</div>
        <div class="sidebar-content js-toc"></div>
    </div>

    
    <div class="sidebar-box">
        <div class="sidebar-title h2">Tin tức</div>
        <div class="sidebar-content">
                    <div class="media">
                        <div class="media-left">
                            <a href="../bao-cao-nghien-cuu-quy-3/index.html">
                                    <img style="object-fit: cover" class="media-object" src="../content/images/1CSKMZA-hwBOtsfRK0JjjcNZUrF80lGLt.PNG" width="50" height="50" alt="Báo cáo nghiên cứu quý 3 năm 2020">
                            </a>
                        </div>
                        <div class="media-body">
                            <a class="title" href="../bao-cao-nghien-cuu-quy-3/index.html">Báo cáo nghiên cứu quý 3 năm 2020</a>
                            <span>, 30 October 2020</span>
                        </div>
                    </div>
                    <div class="media">
                        <div class="media-left">
                            <a href="../untitled-9/index.html">
                                    <img style="object-fit: cover" class="media-object" src="https://drive.google.com/uc?id&#x3D;19caFAeGojP08PERt9NhyH-tZln5o1dyt&amp;export&#x3D;download" width="50" height="50" alt="Rộn ràng đón tết trung thu 2020">
                            </a>
                        </div>
                        <div class="media-body">
                            <a class="title" href="../untitled-9/index.html">Rộn ràng đón tết trung thu 2020</a>
                            <span>, 25 September 2020</span>
                        </div>
                    </div>
                    <div class="media">
                        <div class="media-left">
                            <a href="../truyen-thong-hoc-tieng-nhat/index.html">
                                    <img style="object-fit: cover" class="media-object" src="https://drive.google.com/uc?id&#x3D;19mB9PZcsjUoxU5mbNYE49Ai0dMUlOPt8&amp;export&#x3D;download" width="50" height="50" alt="Truyền Thống học tiếng Nhật tại VNLAB.">
                            </a>
                        </div>
                        <div class="media-body">
                            <a class="title" href="../truyen-thong-hoc-tieng-nhat/index.html">Truyền Thống học tiếng Nhật tại VNLAB.</a>
                            <span>, 14 August 2020</span>
                        </div>
                    </div>
                    <div class="media">
                        <div class="media-left">
                            <a href="../team-building-vuon-quoc-gia-ba-vi-2020/index.html">
                                    <img style="object-fit: cover" class="media-object" src="https://drive.google.com/uc?id&#x3D;1vCDL4ACVJLRYbc_bMUF-XtOkBYCmlvFL&amp;export&#x3D;download" width="50" height="50" alt="Team Building Vườn Quốc Gia Ba Vì 2020">
                            </a>
                        </div>
                        <div class="media-body">
                            <a class="title" href="../team-building-vuon-quoc-gia-ba-vi-2020/index.html">Team Building Vườn Quốc Gia Ba Vì 2020</a>
                            <span>, 30 June 2020</span>
                        </div>
                    </div>
                    <div class="media">
                        <div class="media-left">
                            <a href="../bao-cao-nghien-cuu-quy-1-nam-2020/index.html">
                                    <img style="object-fit: cover" class="media-object" src="https://drive.google.com/uc?id&#x3D;13zVnT-6TUc6EkCcZox_nn2PHeBSxihYm&amp;export&#x3D;download" width="50" height="50" alt="Báo cáo nghiên cứu Quý 1 năm 2020">
                            </a>
                        </div>
                        <div class="media-body">
                            <a class="title" href="../bao-cao-nghien-cuu-quy-1-nam-2020/index.html">Báo cáo nghiên cứu Quý 1 năm 2020</a>
                            <span>, 20 April 2020</span>
                        </div>
                    </div>
        </div>
    </div>

    <div class="sidebar-box">
        <div class="sidebar-title h2">Key words</div>
        <div class="sidebar-content">
                    <span class="label label-default text-justify tag">
                        <a href="../tag/%2508google-apps-script/index.html" title="google apps script" class="tag tag-5c2c443cc00d970001d28829 google-apps-script">google apps script</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="https://blog.vietnamlab.vn/404/" title="#api" class="tag tag-5e813cddf7370d0001b812c4 hash-api">#api</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="https://blog.vietnamlab.vn/404/" title="#drakov" class="tag tag-5ad30b8d83719800014583ed drakov">#drakov</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="https://blog.vietnamlab.vn/404/" title="#mock" class="tag tag-5e798cb6f7370d0001b812ae hash-mock">#mock</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="https://blog.vietnamlab.vn/404/" title="#test" class="tag tag-5e798cb6f7370d0001b812af hash-test">#test</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="https://blog.vietnamlab.vn/404/" title="#web" class="tag tag-5e813cddf7370d0001b812c5 hash-web">#web</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/10-meo-2/index.html" title="10 mẹo" class="tag tag-5ad30b8d837198000145843b 10-meo-2">10 mẹo</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/10-tips/index.html" title="10 tips" class="tag tag-5ad30b8d8371980001458432 10-tips">10 tips</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/2017/index.html" title="2017" class="tag tag-5ad30b8d8371980001458463 2017">2017</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/2018/index.html" title="2018" class="tag tag-5ad30b8d8371980001458464 2018">2018</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/2020/index.html" title="2020" class="tag tag-5e05cac4bf919d0001802e79 2020">2020</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/adaptive-threshold/index.html" title="adaptive threshold" class="tag tag-5ad30b8d8371980001458462 adaptive-threshold">adaptive threshold</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/adb/index.html" title="adb" class="tag tag-5d479f1fbf919d00018028c9 adb">adb</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/adsense/index.html" title="adsense" class="tag tag-5ad30b8d83719800014583a8 adsense">adsense</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/aff/index.html" title="aff" class="tag tag-5b6119898371980001458b0d aff">aff</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/agile/index.html" title="agile" class="tag tag-5ad30b8d837198000145834b agile">agile</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/ai/index.html" title="AI" class="tag tag-5ad30b8d8371980001458441 ai">AI</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/alert/index.html" title="alert" class="tag tag-5c2c443cc00d970001d2882a alert">alert</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/algorithm/index.html" title="Algorithm" class="tag tag-5e3bb937f7370d0001b8122e algorithm">Algorithm</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/android/index.html" title="android" class="tag tag-5ad30b8d837198000145834c android">android</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/android-studio/index.html" title="android studio" class="tag tag-5ad30b8d83719800014583ce android-studio">android studio</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/anguar-cli/index.html" title="anguar cli" class="tag tag-5ad30b8d837198000145834d anguar-cli">anguar cli</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/angular2/index.html" title="angular2" class="tag tag-5ad30b8d837198000145834e angular2">angular2</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/angular9/index.html" title="angular9" class="tag tag-5ea7b0b5f7370d0001b8132d angular9">angular9</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/ansible/index.html" title="Ansible" class="tag tag-5ad30b8d8371980001458450 ansible">Ansible</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/ant/index.html" title="ant" class="tag tag-5ad30b8d8371980001458398 ant">ant</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/apache/index.html" title="apache" class="tag tag-5ad30b8d837198000145834f apache">apache</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/apache-hive/index.html" title="Apache Hive" class="tag tag-5ad30b8d8371980001458351 apache-hive">Apache Hive</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/apache-knox/index.html" title="Apache Knox" class="tag tag-5ad30b8d8371980001458352 apache-knox">Apache Knox</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/apache-knox-gateway/index.html" title="Apache Knox Gateway" class="tag tag-5ad30b8d8371980001458353 apache-knox-gateway">Apache Knox Gateway</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/apache-poi/index.html" title="Apache POI" class="tag tag-5ad30b8d83719800014583d4 apache-poi">Apache POI</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/api/index.html" title="api" class="tag tag-5ad30b8d83719800014583c1 api">api</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/apiary-editor/index.html" title="apiary editor" class="tag tag-5ad30b8d83719800014583bf apiary-editor">apiary editor</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/application/index.html" title="application" class="tag tag-5bc99b038f5b6d0001832bfa application">application</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/ar/index.html" title="ar" class="tag tag-5ad30b8d8371980001458404 ar">ar</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/artoolkit/index.html" title="artoolkit" class="tag tag-5ad30b8d8371980001458405 artoolkit">artoolkit</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/aso/index.html" title="aso" class="tag tag-5b6119898371980001458b08 aso">aso</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/association-rules/index.html" title="Association Rules" class="tag tag-5ad30b8d83719800014583c5 association-rules">Association Rules</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/asynchronous/index.html" title="asynchronous" class="tag tag-5ad30b8d8371980001458355 asynchronous">asynchronous</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/atom/index.html" title="atom" class="tag tag-5ad30b8d83719800014583fd atom">atom</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/autoencoder/index.html" title="autoencoder" class="tag tag-5bfa780f165b57000125175c autoencoder">autoencoder</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/automation-testing/index.html" title="automation testing" class="tag tag-5ad30b8d83719800014583fe automation-testing">automation testing</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/awk/index.html" title="awk" class="tag tag-5ad30b8d8371980001458356 awk">awk</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/aws/index.html" title="AWS" class="tag tag-5ee65390f7370d0001b813e7 aws">AWS</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/aws-certified/index.html" title="AWS Certified" class="tag tag-5f262d1bf7370d0001b8146b aws-certified">AWS Certified</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/backend/index.html" title="backend" class="tag tag-5b30687483719800014589a0 backend">backend</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/backend2018/index.html" title="backend2018" class="tag tag-5b30687483719800014589a1 backend2018">backend2018</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/bao-cao/index.html" title="báo cáo" class="tag tag-5f9a48c4128d0900010f5c3f bao-cao">báo cáo</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/basictype/index.html" title="BasicType" class="tag tag-5ad30b8d83719800014583d9 basictype">BasicType</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/bcrypt/index.html" title="bcrypt" class="tag tag-5d96a6f2bf919d0001802d24 bcrypt">bcrypt</a>
                    </span>
        </div>
    </div>
</div>
</div>
<div class="col-lg-offset-1"></div>


    </div>

    <div id="footer">
        <div class="row">
            <div class="col-lg-offset-1 col-lg-10 copyright">
                <a href="../index.html">GMO-Z.com Vietnam Lab Center Technology Blog</a> &copy; 2020
            </div>
            <div class="col-lg-offset-1"></div>
        </div>
    </div>

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-166653304-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-166653304-2');
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59342535-1', 'auto');
  ga('send', 'pageview');
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)']]
  },
  svg: {
    fontCache: 'global'
  }
};
</script>

<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Libraries -->
    <script type="text/javascript" src="../assets/js/libs/jquery.fitvids.min.js?v=52156bd6b0"></script>
    <script type="text/javascript" src="../assets/js/libs/tocbot.min.js?v=52156bd6b0"></script>
    <script type="text/javascript" src="../assets/js/libs/bootstrap.min.js?v=52156bd6b0"></script>
    <script type="text/javascript" src="../assets/js/libs/highlight.pack.js?v=52156bd6b0"></script>

    <!-- Custom JS -->
    <script type="text/javascript" src="../assets/js/app/index.js?v=52156bd6b0"></script>

    <!-- App Services -->
    <script type="text/javascript" charset="UTF-8" src="https://cache.img.gmo.jp/common_header/script.js" async></script>
    <script src="https://apis.google.com/js/platform.js" async defer>{ lang: 'vi' }</script>

</body>

</html>