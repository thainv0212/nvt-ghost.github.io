<!DOCTYPE html>
<html ‚ö°>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">

    <title>Test ·ª©ng d·ª•ng React Native v·ªõi Jest (Ph·∫ßn 1) | Qua v√≠ d·ª• th·ª±c t·∫ø</title>

    <meta name="description" content="Unit test l√† b∆∞·ªõc ƒë·∫ßu ti√™n trong quy tr√¨nh ki·ªÉm th·ª≠ ph·∫ßn m·ªÅm. V·ªõi Jestjs m·ªôt JavaScript Testing Framework, ta c√≥ th·ªÉ d·ªÖ d√†ng s·ª≠ d·ª•ng v√† c√†i ƒë·∫∑t." />
    <link rel="canonical" href="../index.html" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    
    <meta property="og:site_name" content="GMO-Z.com Vietnam Lab Center Technology Blog" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Test ·ª©ng d·ª•ng React Native v·ªõi Jest (Ph·∫ßn 1) | Qua v√≠ d·ª• th·ª±c t·∫ø" />
    <meta property="og:description" content="Unit test l√† b∆∞·ªõc ƒë·∫ßu ti√™n trong quy tr√¨nh ki·ªÉm th·ª≠ ph·∫ßn m·ªÅm. V·ªõi Jestjs m·ªôt JavaScript Testing Framework, ta c√≥ th·ªÉ d·ªÖ d√†ng s·ª≠ d·ª•ng v√† c√†i ƒë·∫∑t." />
    <meta property="og:url" content="https://blog.vietnamlab.vn/unit-test-voi-jest/" />
    <meta property="og:image" content="https://drive.google.com/uc?id&#x3D;14WERBNNF7ABPzz-lz8rTb6IkK5zTkrXl&amp;export&#x3D;download" />
    <meta property="article:published_time" content="2019-11-05T01:15:48.000Z" />
    <meta property="article:modified_time" content="2019-11-05T01:15:48.000Z" />
    <meta property="article:tag" content="jest" />
    <meta property="article:tag" content="unittest" />
    <meta property="article:tag" content="reactnative" />
    <meta property="article:tag" content="testing" />
    <meta property="article:tag" content="unit test" />
    
    <meta property="article:publisher" content="https://www.facebook.com/vietnamlab.vn" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Test ·ª©ng d·ª•ng React Native v·ªõi Jest (Ph·∫ßn 1) | Qua v√≠ d·ª• th·ª±c t·∫ø" />
    <meta name="twitter:description" content="Unit test l√† b∆∞·ªõc ƒë·∫ßu ti√™n trong quy tr√¨nh ki·ªÉm th·ª≠ ph·∫ßn m·ªÅm. V·ªõi Jestjs m·ªôt JavaScript Testing Framework, ta c√≥ th·ªÉ d·ªÖ d√†ng s·ª≠ d·ª•ng v√† c√†i ƒë·∫∑t." />
    <meta name="twitter:url" content="https://blog.vietnamlab.vn/unit-test-voi-jest/" />
    <meta name="twitter:image" content="https://drive.google.com/uc?id&#x3D;14WERBNNF7ABPzz-lz8rTb6IkK5zTkrXl&amp;export&#x3D;download" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="N.B.D" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="jest, unittest, reactnative, testing, unit test" />
    <meta property="og:image:width" content="796" />
    <meta property="og:image:height" content="416" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "GMO-Z.com Vietnam Lab Center Technology Blog",
        "url": "https://blog.vietnamlab.vn/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://blog.vietnamlab.vn/favicon.ico",
            "width": 48,
            "height": 48
        }
    },
    "author": {
        "@type": "Person",
        "name": "N.B.D",
        "url": "https://blog.vietnamlab.vn/author/duynb/",
        "sameAs": []
    },
    "headline": "Test ·ª©ng d·ª•ng React Native v·ªõi Jest (Ph·∫ßn 1) | Qua v√≠ d·ª• th·ª±c t·∫ø",
    "url": "https://blog.vietnamlab.vn/unit-test-voi-jest/",
    "datePublished": "2019-11-05T01:15:48.000Z",
    "dateModified": "2019-11-05T01:15:48.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "https://drive.google.com/uc?id=14WERBNNF7ABPzz-lz8rTb6IkK5zTkrXl&export=download",
        "width": 796,
        "height": 416
    },
    "keywords": "jest, unittest, reactnative, testing, unit test",
    "description": "M·ªü ƒë·∫ßu\nUnit test l√† b∆∞·ªõc ƒë·∫ßu ti√™n trong quy tr√¨nh ki·ªÉm th·ª≠ ph·∫ßn m·ªÅm. H√£y xem m√¥ h√¨nh\nd∆∞·ªõi ƒë√¢y ƒë·ªÉ th·∫•y ƒë∆∞·ª£c t·∫ßm quan tr·ªçng c·ªßa Unit tests. Khi c√†ng tƒÉng test ·ªü unit\ntests s·∫Ω c√†ng gi·∫£m test ·ªü c√°c t·∫ßng tr√™n. \n\nTesting TriangleTrong unit test ta s·∫Ω ki·ªÉm tra t·ª´ng ph·∫ßn nh·ªè trong code, ƒë√≥ c√≥\nth·ªÉ l√† c√°c method, function trong class, th·∫≠m ch√≠ l√† ph·∫ßn nh·ªè h∆°n trong\nfunction.\n\nH√¥m nay t√¥i s·∫Ω gi·ªõi thi·ªáu v·ªõi c√°c b·∫°n framework c·ªßa React Native gi√∫p th·ª±c hi·ªán\nc√¥ng vi·ªác test ƒë√≥ ch√≠nh l√† Jest.\n\n1.Configure Jest\n",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://blog.vietnamlab.vn/"
    }
}
    </script>

    <meta name="generator" content="Ghost 3.36" />
    <link rel="alternate" type="application/rss+xml" title="GMO-Z.com Vietnam Lab Center Technology Blog" href="../../rss/index.html" />

    <style amp-custom>
    *,
    *::before,
    *::after {
        box-sizing: border-box;
    }

    html {
        overflow-x: hidden;
        overflow-y: scroll;
        font-size: 62.5%;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    }

    body {
        min-height: 100vh;
        margin: 0;
        padding: 0;
        color: #3a4145;
        font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;
        font-size: 1.7rem;
        line-height: 1.55em;
        font-weight: 400;
        font-style: normal;
        background: #fff;
        scroll-behavior: smooth;
        overflow-x: hidden;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    p,
    ul,
    ol,
    li,
    dl,
    dd,
    hr,
    pre,
    form,
    table,
    video,
    figure,
    figcaption,
    blockquote {
        margin: 0;
        padding: 0;
    }

    ul[class],
    ol[class] {
        padding: 0;
        list-style: none;
    }

    img {
        display: block;
        max-width: 100%;
    }

    input,
    button,
    select,
    textarea {
        font: inherit;
        -webkit-appearance: none;
    }

    fieldset {
        margin: 0;
        padding: 0;
        border: 0;
    }

    label {
        display: block;
        font-size: 0.9em;
        font-weight: 700;
    }

    hr {
        position: relative;
        display: block;
        width: 100%;
        height: 1px;
        border: 0;
        border-top: 1px solid currentcolor;
        opacity: 0.1;
    }

    ::selection {
        text-shadow: none;
        background: #cbeafb;
    }

    mark {
        background-color: #fdffb6;
    }

    small {
        font-size: 80%;
    }

    sub,
    sup {
        position: relative;
        font-size: 75%;
        line-height: 0;
        vertical-align: baseline;
    }
    sup {
        top: -0.5em;
    }
    sub {
        bottom: -0.25em;
    }

    ul li + li {
        margin-top: 0.6em;
    }

    a {
        color: #1292EE;
        text-decoration-skip-ink: auto;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        margin: 0;
        font-weight: 700;
        color: #121212;
        line-height: 1.4em;
    }

    h1 {
        font-size: 3.4rem;
        line-height: 1.1em;
    }

    h2 {
        font-size: 2.4rem;
        line-height: 1.2em;
    }

    h3 {
        font-size: 1.8rem;
    }

    h4 {
        font-size: 1.7rem;
    }

    h5 {
        font-size: 1.6rem;
    }

    h6 {
        font-size: 1.6rem;
    }

    amp-img {
        height: 100%;
        width: 100%;
        max-width: 100%;
        max-height: 100%;
    }

    amp-img img {
        object-fit: cover;
    }

    .page-header {
        padding: 50px 5vmin 30px;
        text-align: center;
        font-size: 2rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .page-header a {
        color: #121212;
        font-weight: 700;
        text-decoration: none;
        font-size: 1.6rem;
        letter-spacing: -0.1px;
    }

    .post {
        max-width: 680px;
        margin: 0 auto;
    }

    .post-header {
        margin: 0 5vmin 5vmin;
        text-align: center;
    }

    .post-meta {
        margin: 1rem 0 0 0;
        text-transform: uppercase;
        color: #738a94;
        font-weight: 500;
        font-size: 1.3rem;
    }

    .post-image {
        margin: 0 0 5vmin;
    }

    .post-image img {
        display: block;
        width: 100%;
        height: auto;
    }

    .post-content {
        padding: 0 5vmin;
    }

    .post-content > * + * {
        margin-top: 1.5em;
    }

    .post-content [id]:not(:first-child) {
        margin: 2em 0 0;
    }

    .post-content > [id] + * {
        margin-top: 1rem;
    }

    .post-content [id] + .kg-card,
    .post-content blockquote + .kg-card {
        margin-top: 40px;
    }

    .post-content > ul,
    .post-content > ol,
    .post-content > dl {
        padding-left: 1.9em;
    }

    .post-content hr {
        margin-top: 40px;
    }

    .post .post-content hr + * {
        margin-top: 40px;
    }

    .post-content amp-img {
        background-color: #f8f8f8;
    }

    .post-content blockquote {
        position: relative;
        font-style: italic;
    }

    .post-content blockquote::before {
        content: "";
        position: absolute;
        left: -1.5em;
        top: 0;
        bottom: 0;
        width: 0.3rem;
        background: #000;
    }

    .post-content :not(.kg-card):not([id]) + .kg-card {
        margin-top: 40px;
    }

    .post-content .kg-card + :not(.kg-card) {
        margin-top: 40px;
    }

    .kg-card figcaption {
        padding: 1.5rem 1.5rem 0;
        text-align: center;
        font-weight: 500;
        font-size: 1.3rem;
        line-height: 1.4em;
        opacity: 0.6;
    }

    .kg-card figcaption strong {
        color: rgba(0,0,0,0.8);
    }

    .post-content :not(pre) code {
        vertical-align: middle;
        padding: 0.15em 0.4em 0.15em;
        border: #e1eaef 1px solid;
        font-weight: 400;
        font-size: 0.9em;
        line-height: 1em;
        color: #dc0050;
        background: #f0f6f9;
        border-radius: 0.25em;
    }

    .post-content > pre {
        overflow: scroll;
        padding: 16px 20px;
        color: #fff;
        background: #1F2428;
        border-radius: 5px;
        box-shadow: 0 2px 6px -2px rgba(0,0,0,.1), 0 0 1px rgba(0,0,0,.4);
    }

    .kg-embed-card {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
    }

    .kg-image-card img {
        margin: auto;
    }

    .kg-gallery-card + .kg-gallery-card {
        margin-top: 0.75em;
    }

    .kg-gallery-container {
        position: relative;
    }

    .kg-gallery-row {
        display: flex;
        flex-direction: row;
        justify-content: center;
    }

    .kg-gallery-image {
        width: 100%;
        height: 100%;
    }

    .kg-gallery-row:not(:first-of-type) {
        margin: 0.75em 0 0 0;
    }

    .kg-gallery-image:not(:first-of-type) {
        margin: 0 0 0 0.75em;
    }

    .kg-bookmark-card,
    .kg-bookmark-publisher {
        position: relative;
    }

    .kg-bookmark-container,
    .kg-bookmark-container:hover {
        display: flex;
        flex-wrap: wrap;
        flex-direction: row-reverse;
        color: currentColor;
        background: rgba(255,255,255,0.6);
        font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;
        text-decoration: none;
        border-radius: 5px;
        box-shadow: 0 2px 6px -2px rgba(0, 0, 0, 0.1), 0 0 1px rgba(0, 0, 0, 0.4);
        overflow: hidden;
    }

    .kg-bookmark-content {
        flex-basis: 0;
        flex-grow: 999;
        padding: 20px;
        order: 1;
    }

    .kg-bookmark-title {
        font-weight: 600;
        font-size: 1.5rem;
        line-height: 1.3em;
    }

    .kg-bookmark-description {
        display: -webkit-box;
        max-height: 45px;
        margin: 0.5em 0 0 0;
        font-size: 1.4rem;
        line-height: 1.55em;
        overflow: hidden;
        opacity: 0.8;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
    }

    .kg-bookmark-metadata {
        margin-top: 20px;
    }

    .kg-bookmark-metadata {
        display: flex;
        align-items: center;
        font-weight: 500;
        font-size: 1.3rem;
        line-height: 1.3em;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .kg-bookmark-description {
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 2;
        overflow: hidden;
    }

    .kg-bookmark-metadata amp-img {
        width: 18px;
        height: 18px;
        max-width: 18px;
        max-height: 18px;
        margin-right: 10px;
    }

    .kg-bookmark-thumbnail {
        display: flex;
        flex-basis: 20rem;
        flex-grow: 1;
        justify-content: flex-end;
    }

    .kg-bookmark-thumbnail amp-img {
        max-height: 200px;
    }

    .kg-bookmark-author {
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
    }

    .kg-bookmark-publisher::before {
        content: "‚Ä¢";
        margin: 0 .5em;
    }

    .kg-width-full.kg-card-hascaption {
        display: grid;
        grid-template-columns: inherit;
    }

    .post-content table {
        border-collapse: collapse;
        width: 100%;
    }

    .post-content th {
        padding: 0.5em 0.8em;
        text-align: left;
        font-size: .75em;
        text-transform: uppercase;
    }

    .post-content td {
        padding: 0.4em 0.7em;
    }

    .post-content tbody tr:nth-child(2n + 1) {
        background-color: rgba(0,0,0,0.1);
        padding: 1px;
    }

    .post-content tbody tr:nth-child(2n + 2) td:last-child {
        box-shadow:
            inset 1px 0 rgba(0,0,0,0.1),
            inset -1px 0 rgba(0,0,0,0.1);
    }

    .post-content tbody tr:nth-child(2n + 2) td {
        box-shadow: inset 1px 0 rgba(0,0,0,0.1);
    }

    .post-content tbody tr:last-child {
        border-bottom: 1px solid rgba(0,0,0,.1);
    }

    .page-footer {
        padding: 60px 5vmin;
        margin: 60px auto 0;
        text-align: center;
        background-color: #f8f8f8;
    }

    .page-footer h3 {
        margin: 0.5rem 0 0 0;
    }

    .page-footer p {
        max-width: 500px;
        margin: 1rem auto 1.5rem;
        font-size: 1.7rem;
        line-height: 1.5em;
        color: rgba(0,0,0,0.6)
    }

    .powered {
        display: inline-flex;
        align-items: center;
        margin: 30px 0 0;
        padding: 6px 9px 6px 6px;
        border: rgba(0,0,0,0.1) 1px solid;
        font-size: 12px;
        line-height: 12px;
        letter-spacing: -0.2px;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
        font-weight: 500;
        color: #222;
        text-decoration: none;
        background: #fff;
        border-radius: 6px;
    }

    .powered svg {
        height: 16px;
        width: 16px;
        margin: 0 6px 0 0;
    }

    @media (max-width: 600px) {
        body {
            font-size: 1.6rem;
        }
        h1 {
            font-size: 3rem;
        }

        h2 {
            font-size: 2.2rem;
        }
    }

    @media (max-width: 400px) {
        h1 {
            font-size: 2.6rem;
            line-height: 1.15em;
        }
        h2 {
            font-size: 2rem;
            line-height: 1.2em;
        }
        h3 {
            font-size: 1.7rem;
        }
    }
    </style>

    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <script async src="https://cdn.ampproject.org/v0.js"></script>

    

</head>

<body class="amp-template">
    <header class="page-header">
        <a href="../../index.html">
                GMO-Z.com Vietnam Lab Center Technology Blog
        </a>
    </header>

    <main class="content" role="main">
        <article class="post">

            <header class="post-header">
                <h1 class="post-title">Test ·ª©ng d·ª•ng React Native v·ªõi Jest (Ph·∫ßn 1)</h1>
                <section class="post-meta">
                    N.B.D -
                    <time class="post-date" datetime="2019-11-05">05 Nov 2019</time>
                </section>
            </header>
            <figure class="post-image">
                <amp-img src="https://drive.google.com/uc?id&#x3D;14WERBNNF7ABPzz-lz8rTb6IkK5zTkrXl&amp;export&#x3D;download" width="600" height="340" layout="responsive"></amp-img>
            </figure>
            <section class="post-content">

                <h3 id="m-u">M·ªü ƒë·∫ßu</h3><p>Unit test l√† b∆∞·ªõc ƒë·∫ßu ti√™n trong quy tr√¨nh ki·ªÉm th·ª≠ ph·∫ßn m·ªÅm. H√£y xem m√¥ h√¨nh d∆∞·ªõi ƒë√¢y ƒë·ªÉ th·∫•y ƒë∆∞·ª£c t·∫ßm quan tr·ªçng c·ªßa Unit tests. Khi c√†ng tƒÉng test ·ªü unit tests s·∫Ω c√†ng gi·∫£m test ·ªü c√°c t·∫ßng tr√™n. </p><figure class="kg-card kg-image-card kg-card-hascaption"><amp-img src="https://drive.google.com/uc?id=1A4pFOJ3tNqlJgoUYFa3YjKQ-9I3pXZ5d&amp;export=download" class="kg-image" alt width="300" height="233" layout="responsive"></amp-img><figcaption><strong><strong><em><em>Testing Triangle</em></em></strong></strong></figcaption></figure><p>Trong unit test ta s·∫Ω ki·ªÉm tra t·ª´ng ph·∫ßn nh·ªè trong code, ƒë√≥ c√≥ th·ªÉ l√† c√°c method, function trong class, th·∫≠m ch√≠ l√† ph·∫ßn nh·ªè h∆°n trong function.</p><p>H√¥m nay t√¥i s·∫Ω gi·ªõi thi·ªáu v·ªõi c√°c b·∫°n framework c·ªßa React Native gi√∫p th·ª±c hi·ªán c√¥ng vi·ªác test ƒë√≥ ch√≠nh l√† Jest.</p><h3 id="1-configure-jest">1.Configure Jest</h3><p><em> T·ª´ phi√™n b·∫£n RN 0.38 tr·ªü l√™n, Jest ƒë√£ ƒë∆∞·ª£c t√≠ch h·ª£p s·∫µn khi b·∫°n t·∫°o project b·∫±ng <code>react-native init</code>, v√¨ th·∫ø vi·ªác setup n√†y ƒë·ªëi v·ªõi b·∫°n c√≥ th·ªÉ ƒë√£ c√≥ s·∫µn v√† ko c·∫ßn setup th√™m n·ªØa. Tham kh·∫£o c√°ch th√™m c√°ch c√†i ƒë·∫∑t t·∫°i <a href="https://jestjs.io/docs/en/getting-started"><strong>ƒë√¢y</strong></a></em></p><p>Ki·ªÉm tra file <code>package.json</code></p><pre><code>{
  "scripts": {
    "test": "jest"
  },
  "devDependencies": {
    "babel-jest": "24.9.0",
    "jest": "24.9.0",
    "react-test-renderer": "16.9.0"
  },
  "jest": {
    "preset": "react-native"
  }
}</code></pre><h3 id="2-snapshot-testing-l-g-">2.Snapshot testingüì∏ l√† g√¨?</h3><p>V·ªõi Jest ch√∫ng ta c√≥ th·ªÉ d·ªÖ d√†ng test c√°c component khi c√≥ s·ª± thay ƒë·ªïi props v√† state.</p><blockquote>Snapshot test l√† c√¥ng c·ª• r·∫•t h·ªØu √≠ch trong tr∆∞·ªùng h·ª£p b·∫°n mu·ªën ch·∫Øc ch·∫Øn r·∫±ng UI kh√¥ng b·ªã thay ƒë·ªïi ngo√†i √Ω mu·ªën.</blockquote><blockquote>Trong react native , snapshot testing l√† vi·ªác t·∫°o ra 1 file snapshot, sau ƒë√≥ trong nh·ªØng l·∫ßn test sau, c√°c component s·∫Ω ti·∫øp t·ª•c t·∫°o ra c√°c rendered output kh√°c ƒë·ªÉ so s√°nh v·ªõi file snapshot ban ƒë·∫ßu, n·∫øu c√≥ s·ª± thay ƒë·ªïi th√¨ k·∫øt qu·∫£ test s·∫Ω fail.</blockquote><h3 id="3-ng-d-ng-snapshot-test-v-o-project">3.·ª®ng d·ª•ng snapshot test v√†o project</h3><p>Sau khi t·∫°o project b·∫±ng c√¢u l·ªánh <code>react-native init</code> ta ¬†ƒë∆∞·ª£c c·∫•u tr√∫c th∆∞ m·ª•c sau:</p><figure class="kg-card kg-image-card kg-card-hascaption"><amp-img src="https://drive.google.com/uc?id=1SusRns_UnOuLjfg5_ssbfS0VcsP5IJtV&amp;export=download" class="kg-image" alt width="296" height="450" layout="fixed"></amp-img><figcaption>C·∫•u tr√∫c th∆∞ m·ª•c</figcaption></figure><p>·ªû ƒë√¢y t√¥i ƒë√£ th√™m th∆∞ m·ª•c <code>src</code> d√πng ƒë·ªÉ ch·ª©a file source trong project. Trong th∆∞ m·ª•c n√†y, t√¥i s·∫Ω t·∫°o th√™m 1 file <code>Button.js</code></p><pre><code class="language-javascript">import React, { Component } from 'react';
import { Text, TouchableOpacity, Linking } from 'react-native';
// 1. Changed to a class based component
class Button extends Component {
    constructor(props) {
        super(props);
    }

    // 2. Custom function called onPress TouchableOpacity
    onPressHandler = () =&gt; {
        const { onPress, url } = this.props
        if (url) {
            Linking.openURL(url)
        }
        onPress();
    }

    render() {
        const { buttonStyle, textStyle } = styles;
        const { label } = this.props;

        return (
            &lt;TouchableOpacity onPress={this.onPressHandler} style={newButtonStyle}&gt;
                &lt;Text style={textStyle}&gt;
                    {label}
                &lt;/Text&gt;
            &lt;/TouchableOpacity&gt;
        );
    }
};

const styles = {
    textStyle: {
        alignSelf: 'center',
        color: '#fff',
        fontSize: 16
    },
    buttonStyle: {
        height: 45,
        justifyContent: 'center',
        backgroundColor: '#38ba7d',
        borderBottomWidth: 6,
        borderBottomColor: '#1e6343',
        borderWidth: 1,
        marginLeft: 10,
        marginRight: 10
    }
};

export default Button;
</code></pre>
<p>K·∫øt qu·∫£ Button s·∫Ω gi·ªëng nh∆∞ th·∫ø n√†y:</p><figure class="kg-card kg-image-card"><amp-img src="https://drive.google.com/uc?id=1A0GnCs_PxmOWwfJm09djxS_zeGf2KJCX&amp;export=download" class="kg-image" alt width="285" height="46" layout="fixed"></amp-img></figure><p>Nh∆∞ v·∫≠y ƒë√£ xong ph·∫ßn chu·∫©n b·ªã, b√¢y gi·ªù ch√∫ng ta b·∫Øt ƒë·∫ßu vi·∫øt test.</p><p>ƒê·∫ßu ti√™n t·∫°o file <code>Button-test.js</code> trong th∆∞ m·ª•c <code>_tests_</code></p><figure class="kg-card kg-image-card"><amp-img src="https://drive.google.com/uc?id=1wHDncnn2JisnskLRFEjHL9nKJlovQOHR&amp;export=download" class="kg-image" alt width="233" height="72" layout="fixed"></amp-img></figure><pre><code>import 'react-native';
import React from 'react';
import Button from '../src/Button';

// Note: test renderer must be required after react-native.
import renderer from 'react-test-renderer';

describe('Button', () =&gt; {
  describe('Rendering', () =&gt; {
      it('should match to snapshot', () =&gt; {
        const component = renderer.create(
          &lt;Button label={'Click me!'}/&gt;
        ).toJSON();
        expect(component).toMatchSnapshot()
      });
  });
});
</code></pre><p>·ªû ƒë√¢y c·∫ßn ch√∫ √Ω ƒë·∫øn <strong>react-test-renderer</strong>. </p><blockquote><code>'react-test-renderer'</code> l√† m·ªôt th∆∞ vi·ªán gi√∫p ch√∫ng ta c√≥ th·ªÉ t·∫°o ra m·ªôt snapshot c·ªßa <strong>DOM tree</strong> ƒë∆∞·ª£c render b·ªüi ¬†React DOM or React Native component m√† kh√¥ng c·∫ßn s·ª≠ d·ª•ng browser ho·∫∑c <a href="https://github.com/tmpvar/jsdom" rel="nofollow noopener noreferrer">jsdom</a>. </blockquote><blockquote>Thay v√¨ ph·∫£i render ra c√°c object th·∫≠t th√¨ n√≥ render ra c√°c JS object ƒë·ªÉ c√≥ th·ªÉ th·ª±c hi·ªán test tr·ª±c ti·∫øp tr√™n Node.</blockquote><p>C·∫•u tr√∫c h√†m test:</p><pre><code>describe('Button', () =&gt; {
	// test stuff
}</code></pre><p>Method <code>describe</code> ch·ª©a m·ªôt ho·∫∑c nhi·ªÅu test li√™n quan. M·ªói l·∫ßn vi·∫øt m·ªôt test m·ªõi h√£y b·ªçc n√≥ trong <strong>describe block</strong>.</p><pre><code>it('should match to snapshot', () =&gt; {
	// actual test
});</code></pre><p>H√†m test ƒë∆∞·ª£c truy·ªÅn v√†o callback nh∆∞ m·ªôt tham s·ªë trong h√†m <code>it</code>. Ngo√†i ra ta truy·ªÅn th√™m ph·∫ßn m√¥ t·∫£ mong mu·ªën h√†m th·ª±c hi·ªán.</p><p>ƒê·ªÉ c√≥ th·ªÉ test ƒë∆∞·ª£c ch√∫ng ta c·∫ßn chu·∫©n b·ªã d·ªØ li·ªáu ƒë·∫ßu v√†o(<strong>input</strong>), d·ªØ li·ªáu ƒë·∫ßu ra(<strong>output</strong>) v√† h√†m so s√°nh(<strong>function</strong>) 2 k·∫øt qu·∫£ c√≥ tr√πng kh·ªõp nhau kh√¥ng.</p><p>·ªû v√≠ d·ª• tr√™n ta c√≥ <code>component</code> ƒë√≥ng vai tr√≤ l√† <strong>input data (snapshot c·ªßa DOM tree).</strong></p><p>H√†m <code>expect</code> cho ph√©p ch√∫ng ta truy c·∫≠p v√†o c√°c ph∆∞∆°ng th·ª©c <code>matcher</code> ƒë·ªÉ ph√°t hi·ªán ra nh·ªØng s·ª± sai kh√°c. ·ªû ƒë√¢y ch√∫ng ta s·ª≠ d·ª•ng <code>toMatchSnapshot</code> ƒë·ªÉ ƒë·∫£m b·∫£o r·∫±ng n√≥ tr√πng v·ªõi snapshot g·∫ßn ƒë√¢y nh·∫•t.</p><p><strong>Running test</strong>: <code>npm test</code> ƒë·ªÉ xem ƒëi·ªÅu g√¨ x·∫£y ra.</p><figure class="kg-card kg-image-card"><amp-img src="https://drive.google.com/uc?id=1WCHDAuK0m1CryktEjrnZt1klW2p1ofVT&amp;export=download" class="kg-image" alt width="384" height="332" layout="responsive"></amp-img></figure><p>Khi ch·∫°y snapshot test l·∫ßn ƒë·∫ßu, Jest s·∫Ω t·∫°o m·ªôt snapshot file trong th∆∞ m·ª•c <code>_snapshots_</code></p><figure class="kg-card kg-image-card"><amp-img src="https://drive.google.com/uc?id=1XBJQFZcsv-NOoYdfU24FteUnqLeJKUWA&amp;export=download" class="kg-image" alt width="167" height="92" layout="fixed"></amp-img></figure><p></p><p>Khi m·ªü file snapshot s·∫Ω th·∫•y n√≥ convert view c·ªßa ch√∫ng ta sang object ƒë·ªÉ ti·ªán so s√°nh c≈©ng nh∆∞ test.</p><p><strong>ƒêi·ªÅu g√¨ x·∫£y ra n·∫øu ch√∫ng ta thay ƒë·ªïi UI</strong></p><p>Thay ƒë·ªïi m√†u n·ªÅn button <code>backgroundColor: '#0000FF'</code> trong <code>buttonStyle</code>, v√† ch·∫°y l·∫°i test <code>npm test„ÄÄ</code></p><figure class="kg-card kg-image-card"><amp-img src="https://drive.google.com/uc?id=1EUr5FRovhDzVYnjC83-zb8kP9S3CDu75&amp;export=download" class="kg-image" alt width="650" height="516" layout="responsive"></amp-img></figure><p>Ngay l·∫≠p t·ª©c jest b√°o k·∫øt qu·∫£ test b·ªã <code>FAIL</code>, nh∆∞ ƒë√£ tr√¨nh b√†y ·ªü tr√™n vi·ªác thay ƒë·ªïi code d·∫´n ƒë·∫øn b·∫£n <code>snapshot</code> m·ªõi kh√°c so v·ªõi b·∫£n c≈©. Jest c√≤n ch·ªâ ra ch·ªó thay ƒë·ªïi, th·∫≠t s·ª± r·∫•t ti·ªán l·ª£i.</p><p>V·∫≠y n·∫øu mu·ªën c·∫≠p nh·∫≠t b·∫£n <code>snapshot</code> m·ªõi th√¨ sao. R·∫•t ƒë∆°n gi·∫£n s·ª≠ d·ª•ng l·ªánh sau:</p><p><code>npm test -- -u</code></p><p>K·∫øt qu·∫£ <code>snapshot</code> ƒë√£ ƒë∆∞·ª£c update l·∫°i. L·ªùi khuy√™n n√™n <code>commit</code> l√™n git m·ªói khi update l·∫°i <code>snapshot</code>.</p><figure class="kg-card kg-image-card"><amp-img src="https://drive.google.com/uc?id=1_VNHQOhIzSJ045r61FiGHe_WBhOkkcRh&amp;export=download" class="kg-image" alt width="331" height="257" layout="responsive"></amp-img></figure><p>Ngo√†i ra c√≤n c√≥ c√°c option kh√°c:</p><figure class="kg-card kg-image-card"><amp-img src="https://drive.google.com/uc?id=1ERFlxRZQ8TAp_6qvTUSeQq0BSIJb1RiP&amp;export=download" class="kg-image" alt width="736" height="298" layout="responsive"></amp-img></figure><h3 id="4-matchers-trong-jest">4. Matchers trong Jest</h3><pre><code>expect(2 + 2).toBe(4);</code></pre><p><code>.toBe()</code> l√† m·ªôt matcher, d√πng ƒë·ªÉ so s√°nh k·∫øt qu·∫£ th·ª±c hi·ªán v·ªõi k·∫øt qu·∫£ mong mu·ªën.</p><p><code>.toBe()</code> s·ª≠ d·ª•ng <code>Object.is</code> ƒë·ªÉ test. Khi mu·ªën ki·ªÉm tra gi√° tr·ªã c·ªßa object h√£y s·ª≠ d·ª•ng <code>toEqual</code>. V√≠ d·ª•:</p><pre><code>it('object assignment', () =&gt; {
  const data = {one: 1};
  data['two'] = 2;
  expect(data).toEqual({one: 1, two: 2});
});</code></pre><p>N·∫øu mu·ªën so s√°nh k·∫øt qu·∫£ tr√°i v·ªõi mong ƒë·ª£i s·ª≠ d·ª•ng <code>.not.toBe()</code></p><pre><code>it('adding positive numbers is not zero', () =&gt; {
  for (let a = 1; a &lt; 10; a++) {
    for (let b = 1; b &lt; 10; b++) {
      expect(a + b).not.toBe(0);
    }
  }
});</code></pre><p>Ngo√†i ra c√≤n c√≥ c√°c matches kh√°c.</p><p><strong>Truthiness</strong></p><ul>
<li><code>toBeNull</code> so s√°nh v·ªõi gi√° tr·ªã <code>null</code></li>
<li><code>toBeUndefined</code> so s√°nh v·ªõi gi√° tr·ªã <code>undefined</code></li>
<li><code>toBeDefined</code> l√† h√†m cho k·∫øt qu·∫£ ng∆∞·ª£c l·∫°i <code>toBeUndefined</code>.</li>
<li><code>toBeTruthy</code> so s√°nh v·ªõi gi√° tr·ªã <code>true</code>.</li>
<li><code>toBeFalsy</code> so s√°nh v·ªõi gi√° tr·ªã <code>false</code>.</li>
</ul>
<p><strong>Numbers</strong></p><pre><code>it('two plus two', () =&gt; {
  const value = 2 + 2;
  expect(value).toBeGreaterThan(3);
  expect(value).toBeGreaterThanOrEqual(3.5);
  expect(value).toBeLessThan(5);
  expect(value).toBeLessThanOrEqual(4.5);

  // c·∫£ toBe v√† toEqual ƒë·ªÅu c√≥ th·ªÉ s·ª≠ d·ª•ng cho numbers
  expect(value).toBe(4);
  expect(value).toEqual(4);
});</code></pre><p>ƒê·ªëi v·ªõi s·ªë th·ª±c s·ª≠ d·ª•ng <code>toBeCloseTo</code> thay v√¨ <code>toEqual</code></p><pre><code>it('adding floating point numbers', () =&gt; {
  const value = 0.1 + 0.2;
  //expect(value).toBe(0.3);           This won't work because of rounding error
  expect(value).toBeCloseTo(0.3); // This works.
});</code></pre><p><strong>Strings</strong></p><p>C√≥ th·ªÉ ki·ªÉm tra strings ¬†v·ªõi regular expressions b·∫±ng<code>toMatch</code></p><pre><code>it('there is no I in team', () =&gt; {
  expect('team').not.toMatch(/I/);
});

it('but there is a "stop" in Christoph', () =&gt; {
  expect('Christoph').toMatch(/stop/);
});</code></pre><p><strong>Arrays v√† Iterables</strong></p><p>Ki·ªÉm tra m·ªôt gi√° tr·ªã c√≥ trong Array hay Iterable kh√¥ng b·∫±ng c√°ch <code>toContain</code></p><pre><code>const shoppingList = [
  'diapers',
  'kleenex',
  'trash bags',
  'paper towels',
  'beer',
];

it('the shopping list has beer on it', () =&gt; {
  expect(shoppingList).toContain('beer');
  expect(new Set(shoppingList)).toContain('beer');
});</code></pre><p><strong>Exceptions</strong></p><p>ƒê·ªÉ ki·ªÉm tra m·ªôt l·ªói c√≥ th·ªÉ x·∫£y ra b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng <code>toThrow</code>:</p><pre><code>function compileAndroidCode() {
  throw new Error('you are using the wrong JDK');
}

it('compiling android goes as expected', () =&gt; {
  expect(compileAndroidCode).toThrow();
  expect(compileAndroidCode).toThrow(Error);

  // You can also use the exact error message or a regexp
  expect(compileAndroidCode).toThrow('you are using the wrong JDK');
  expect(compileAndroidCode).toThrow(/JDK/);
});</code></pre><h3 id="5-mock-functions">5. Mock Functions</h3><p>Mock gi√∫p b·∫°n m√¥ ph·ªèng c√°c t√≠nh ch·∫•t v√† h√†nh vi gi·ªëng h·ªát nh∆∞ ƒë·ªëi t∆∞·ª£ng th·ª±c nh·∫±m ki·ªÉm tra t√≠nh ƒë√∫ng ƒë·∫Øn c·ªßa c√°c ho·∫°t ƒë·ªông b√™n trong.</p><p>Quay l·∫°i v·ªõi v√≠ d·ª• button, b√¢y gi·ªù ch√∫ng ta s·∫Ω test xem s·ª± ki·ªán button c√≥ ƒë∆∞·ª£c k√≠ch ho·∫°t kh√¥ng</p><pre><code>describe('onPressHandler', () =&gt; {
      it('should call onPress', () =&gt; {
        const mockOnPress = jest.fn();   // 1. mock function
        const component = renderer.create(&lt;Button 
            label= "test label" 
            onPress={mockOnPress}           // 2. passing in mock function as props
        /&gt;)
        const instance = component.getInstance(); // 3. getting an instance of component
        instance.onPressHandler();  // 4. manually triggering onPressHandler()
        // Act
        expect(mockOnPress).toHaveBeenCalled();
      });
    });
});</code></pre><p>Ch·∫°y l·∫°i l·ªánh <code>npm test</code> ƒë·ªÉ xem k·∫øt qu·∫£:</p><figure class="kg-card kg-image-card"><amp-img src="https://drive.google.com/uc?id=1XTT3ufskOAwnPk9cMFFeE0hGU_blzFLj&amp;export=download" class="kg-image" alt width="321" height="237" layout="responsive"></amp-img></figure><p>B√†i vi·∫øt sau t√¥i s·∫Ω gi·ªõi thi·ªáu chi ti·∫øt h∆°n v·ªÅ Mock( mock function, class mock, mock modules, ...)</p><h2 id="tham-kh-o">Tham kh·∫£o</h2><p><a href="https://jestjs.io/docs/en/getting-started">https://jestjs.io/docs/en/getting-started</a></p><p><a href="https://callstack.com/blog/testing-react-native-with-the-new-jest-part-1-snapshots-come-into-play/#.12zbnbgwc">https://callstack.com/blog/testing-react-native-with-the-new-jest-part-1-snapshots-come-into-play/#.12zbnbgwc</a></p>

            </section>

        </article>
    </main>
    <footer class="page-footer">
        <h3>GMO-Z.com Vietnam Lab Center Technology Blog</h3>
            <p>Blog chia s·∫ª k·ªπ thu·∫≠t c·ªßa th√†nh vi√™n c√¥ng ty GMO-Z.com Vietnam Lab Center</p>
        <p><a href="../../index.html">Read more posts ‚Üí</a></p>
        <a class="powered" href="https://ghost.org" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 156 156"><g fill="none" fill-rule="evenodd"><rect fill="#15212B" width="156" height="156" rx="27"/><g transform="translate(36 36)" fill="#F6F8FA"><path d="M0 71.007A4.004 4.004 0 014 67h26a4 4 0 014 4.007v8.986A4.004 4.004 0 0130 84H4a4 4 0 01-4-4.007v-8.986zM50 71.007A4.004 4.004 0 0154 67h26a4 4 0 014 4.007v8.986A4.004 4.004 0 0180 84H54a4 4 0 01-4-4.007v-8.986z"/><rect y="34" width="84" height="17" rx="4"/><path d="M0 4.007A4.007 4.007 0 014.007 0h41.986A4.003 4.003 0 0150 4.007v8.986A4.007 4.007 0 0145.993 17H4.007A4.003 4.003 0 010 12.993V4.007z"/><rect x="67" width="17" height="17" rx="4"/></g></g></svg> Published with Ghost</a>
    </footer>
    
</body>
</html>
