<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Load balancing cho web service | GMO-Z.com Vietnam Lab Center</title>
    <meta name="description" content="" />
    <meta property="fb:app_id" content="703042457154743" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google-site-verification" content="duCCqsDAWLg3POOfPMr6JiS4R0g0CjouGGM3fhsG0-0" />
    <link rel="shortcut icon" href="../favicon.ico">

    <!-- Stylesheet -->
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap.min.css?v=52156bd6b0" />
    <link rel="stylesheet" type="text/css" href="../assets/css/font-awesome.min.css?v=52156bd6b0" />
    <link rel="stylesheet" type="text/css" href="../assets/css/atom-one-dark.min.css?v=52156bd6b0" />
    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css?v=52156bd6b0" />

    <script type="text/javascript" src="../assets/js/libs/jquery.min.js?v=52156bd6b0"></script>

    <link rel="canonical" href="index.html" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <link rel="amphtml" href="https://blog.vietnamlab.vn/load-balancing-cho-web-service/amp/" />
    
    <meta property="og:site_name" content="GMO-Z.com Vietnam Lab Center Technology Blog" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Load balancing cho web service" />
    <meta property="og:description" content="Gần đây khi tôi tham gia một dự án về EC ( thương mại điện tử) tôi có gặp 1 vấn đề liên quan tới Load Balancing như sau:  User login vào site rồi, nhưng một lát sau lại bị logout mặc dù session đã được setting trong vòng 1 tuần." />
    <meta property="og:url" content="https://blog.vietnamlab.vn/load-balancing-cho-web-service/" />
    <meta property="og:image" content="https://drive.google.com/uc?id&#x3D;0B05rqFCwNCjkckdfaWYxTU9kbjA&amp;export&#x3D;download" />
    <meta property="article:published_time" content="2016-12-30T16:33:32.000Z" />
    <meta property="article:modified_time" content="2017-02-27T05:00:50.000Z" />
    <meta property="article:tag" content="load balancer" />
    <meta property="article:tag" content="load balancing" />
    <meta property="article:tag" content="nginx" />
    
    <meta property="article:publisher" content="https://www.facebook.com/vietnamlab.vn" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Load balancing cho web service" />
    <meta name="twitter:description" content="Gần đây khi tôi tham gia một dự án về EC ( thương mại điện tử) tôi có gặp 1 vấn đề liên quan tới Load Balancing như sau:  User login vào site rồi, nhưng một lát sau lại bị logout mặc dù session đã được setting trong vòng 1 tuần." />
    <meta name="twitter:url" content="https://blog.vietnamlab.vn/load-balancing-cho-web-service/" />
    <meta name="twitter:image" content="https://drive.google.com/uc?id&#x3D;0B05rqFCwNCjkckdfaWYxTU9kbjA&amp;export&#x3D;download" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="KYO" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="load balancer, load balancing, nginx" />
    <meta property="og:image:width" content="580" />
    <meta property="og:image:height" content="360" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "GMO-Z.com Vietnam Lab Center Technology Blog",
        "url": "https://blog.vietnamlab.vn/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://blog.vietnamlab.vn/favicon.ico",
            "width": 48,
            "height": 48
        }
    },
    "author": {
        "@type": "Person",
        "name": "KYO",
        "image": {
            "@type": "ImageObject",
            "url": "https://drive.google.com/uc?id=0B05rqFCwNCjkM2hSUERPbEVlSVU&export=download",
            "width": 600,
            "height": 614
        },
        "url": "https://blog.vietnamlab.vn/author/longtv/",
        "sameAs": []
    },
    "headline": "Load balancing cho web service",
    "url": "https://blog.vietnamlab.vn/load-balancing-cho-web-service/",
    "datePublished": "2016-12-30T16:33:32.000Z",
    "dateModified": "2017-02-27T05:00:50.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "https://drive.google.com/uc?id=0B05rqFCwNCjkckdfaWYxTU9kbjA&export=download",
        "width": 580,
        "height": 360
    },
    "keywords": "load balancer, load balancing, nginx",
    "description": "Gần đây khi tôi tham gia một dự án về EC ( thương mại điện tử) tôi có gặp 1 vấn\nđề liên quan tới Load Balancing như sau:\n\n * User login vào site rồi, nhưng một lát sau lại bị logout mặc dù session đã\n   được setting trong vòng 1 tuần.\n * Sau đó tôi kiểm tra lại session driver thì thấy  là đang lưu dạng file trên\n   local của server &#x3D;&gt; đã đổi sang lưu trên mysql or reddit nhưng đều vô dụng,\n   tình trạng cũ vẫn tái diễn.\n * Nhờ vấn đề trên mà tôi đã tìm hiểu sâu hơn về Load Balancing một chút và ",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://blog.vietnamlab.vn/"
    }
}
    </script>

    <meta name="generator" content="Ghost 3.36" />
    <link rel="alternate" type="application/rss+xml" title="GMO-Z.com Vietnam Lab Center Technology Blog" href="../rss/index.html" />
</head>

<body class="post-template tag-load-balancer tag-load-balancing tag-nginx nav-closed">
    <script type="text/javascript" src="../assets/js/app/social.js?v=52156bd6b0"></script>
    <div id="fb-root"></div>

    <div id="header">
        <div id="blog-banner">
    <div class="row">
        <div class="col-md-offset-1 col-md-5">
            <img src="../assets/img/vnlab_logo.jpg?v=52156bd6b0" alt="VNLab Logo">
        </div>
        <div class="col-md-5 text-right coworker">
            <img src="../assets/img/vnlab_coworker.jpg?v=52156bd6b0" alt="VNLab coworker">
        </div>
        <div class="col-md-offset-1"></div>
    </div>
</div>

<nav class="navbar navbar-default">
    <div class="row">
        <div class="col-md-offset-1 col-md-10">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                        <li class="">
                            <a class="https://vietnamlab.vn" href="https://vietnamlab.vn">GMO-Z.com Vietnam Lab Center</a>
                        </li>
                        <li class="">
                            <a class="/tag/news/" href="../tag/news/index.html">Tin tức</a>
                        </li>
                        <li class="">
                            <a class="/" href="../index.html">Blog</a>
                        </li>
                        <li class="">
                            <a class="/tuyen-dung/" href="../tuyen-dung/index.html">★ Tuyển dụng ★</a>
                        </li>
                </ul>

                <ul class="nav navbar-nav navbar-right">
                        <li><a class="subscribe-button icon-feed" href="../rss/index.html">Đăng ký</a></li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <div class="col-md-offset-1"></div>
        <!-- /.container-fluid -->
    </div>
</nav>

    </div>

    <div id="body" class="row">
        
<div class="col-lg-offset-1 col-lg-7">
        <article class="post tag-load-balancer tag-load-balancing tag-nginx js-toc-content">
            <div class="post-header">
                <h2 class="post-title"><a href="index.html">Load balancing cho web service</a></h2>
            </div>

            <div class="post-meta">
                <div class="post-date" datetime="2016-12-30">
                    <i class="fa fa-clock-o" aria-hidden="true"></i> 30 December 2016
                </div>
                <div class="post-tag">
                    <i class="fa fa-tags" aria-hidden="true"></i> <a href="../tag/load-balancer/index.html">load balancer</a>, <a href="../tag/load-balancing/index.html">load balancing</a>, <a href="../tag/nginx/index.html">nginx</a>
                </div>
            </div>

            <div class="post-featured post-featured-single">
                <div class="post-featured-img">
                        <img src="https://drive.google.com/uc?id&#x3D;0B05rqFCwNCjkckdfaWYxTU9kbjA&amp;export&#x3D;download" alt="Load balancing cho web service">
                </div>

                <div class="post-author">
                </div>

                <div class="post-share">
                    <div class="share-button">
                        <div class="fb-share-button" data-href="/load-balancing-cho-web-service/" data-layout="button" data-size="large" data-mobile-iframe="true">
                        </div>
                    </div>

                    <div class="share-button">
                        <a class="twitter-share-button" data-size="large" href="https://twitter.com/intent/tweet?text=Load%20balancing%20cho%20web%20service">
                            Tweet
                        </a>
                    </div>
                </div>
            </div>

            <section class="post-content">
                <!--kg-card-begin: markdown--><p>Gần đây khi tôi tham gia một dự án về EC ( thương mại điện tử) tôi có gặp 1 vấn đề liên quan tới Load Balancing như sau:</p>
<ul>
<li>User login vào site rồi, nhưng một lát sau lại bị logout mặc dù session đã được setting trong vòng 1 tuần.</li>
<li>Sau đó tôi kiểm tra lại session driver thì thấy  là đang lưu dạng file trên local của server =&gt; đã đổi sang lưu trên mysql or reddit nhưng đều vô dụng, tình trạng cũ vẫn tái diễn.</li>
<li>Nhờ vấn đề trên mà tôi đã tìm hiểu sâu hơn về Load Balancing một chút và đúc rút được những kinh nghiệm sẽ chia sẻ trong bài viết này.</li>
</ul>
<h3 id="loadbalancinglg">Load Balancing là gì?</h3>
<p>Định nghĩa: là dịch vụ có vai trò phân tải incomming request trên những server backend để tăng tải cho hệ thống. Ngoài ra còn được gọi với cái tên khác là <strong>server farm</strong> hay <strong>server pool</strong>.</p>
<p>Để dễ hình dung thì chúng ta hãy nhìn vào bức hình sau:<br>
<img src="https://drive.google.com/uc?id=0B05rqFCwNCjkYkJ4V2ZJTVN6QWc&amp;export=download" alt="Load Balancing"></p>
<p>Request từ Client tới service sẽ không được gửi trực tiếp mà phải thông qua anh chàng Load Balancer, anh này sẽ dựa vào thuật toán phân tải được thiết lập để forward request tới backend server nào.</p>
<p>Lợi ích của sử dụng Load Balancing:</p>
<ul>
<li><strong>SCALABILITY – khả năng mở rộng</strong>: khi lượng khách hàng tăng lên thì traffic của web site cũng tăng lên , với server để nâng cấp CPU hay RAM là một vấn đề rất khó và tốn thời gian, trong khi sử dụng Load Balancer ta có thể scale theo chiều ngang là tăng số lượng server lên mà down time của hệ thống gần như là bằng 0.</li>
<li><strong>REDUNDANCY – dư thừa</strong>: Khi sử dụng Load Balancing, nếu có 1 trong những web server tạch thì Load Balancing sẽ chuyển traffic sang những node khác còn hoạt động bình thường =&gt; đảm bảo service của chúng ta luôn khả dụng.</li>
<li><strong>FLEXIBILITY – mềm dẻo</strong>: Khi cần main tain web server thì ta có thể tiến hành maintain trên từng node một để đảm bảo service vẫn khả dụng với người dùng.</li>
</ul>
<h3 id="nhngvngpphikhisdnglbchowebservice">Những vấn đề gặp phải khi sử dụng LB cho web service</h3>
<h4 id="qunlasset">Quản lý Asset</h4>
<p>Trước hết về những static asset (css, js,...) để đảm bảo những tài nguyên này là đồng nhất thì chúng ta phải tạo những bản sao đồng nhất trên mỗi một server web backend. Ta có thể sử dụng dịch vụ CDN để cache những static asset này vừa đồng nhất mà lại tăng tốc độ truy cập cho user (Cloudflare, MaxCDN hoặc Cloudfront).</p>
<p>Nhưng nếu web service của bạn cho phép người dùng upload file lên thì user sẽ chỉ truy cập được file khi mà request của họ được Load Balancer trỏ vào server backend mà file được upload lên, nếu LB trỏ request vào những server còn lại thì ta sẽ nhận được error code 404 Resource not found =&gt; để giải quyết vấn đề này ta cần phải sử dụng 1 thằng storage chung cho tất cả web server: File server, Object Storage Server,...</p>
<ul>
<li>Trong dự án của tôi tôi đã sử dụng Conoha (Một cloud hosting service của tập đoàn GMO ) Object Storage (thực ra là nền tảng của Open Stack) để lưu trữ file mà người dùng upload lên, bao gồm ảnh avatar, ảnh tư liệu, tài liệu doc,...</li>
<li>Ngoài ra bạn có thể sụng dụng S3 của AWS để lưu trữ file (S3 có thể tích hợp vs CDN CloudFront của Amazon luôn nên khá là tiện lợi). Dưới đây là 1 ví dụ về sử dụng S3 để lưu trữ file trên PHP.</li>
</ul>
<pre><code class="language-php">// Send uploaded image to S3
Route::post('/upload', function()
{
    // Get Uploaded File
    $file = Input::file('file');

    // Create name for file
    $now = new DateTime;
    $hash = md5( $file-&gt;getClientOriginalName().$now-&gt;format('Y-m-d H:i:s') );
    $key = $hash.'.'.$file-&gt;getClientOriginalExtension();

    $s3 = AWS::get('s3');
    $s3-&gt;putObject(array(
        'Bucket'    =&gt; 'user_uploads_bucket',
        'Key'    =&gt; $key,
        'SourceFile'    =&gt; $file-&gt;getRealPath(),
        'ContentType'    =&gt; $file-&gt;getClientMimeType(),
    ));

    // Probably store the name of the file in a database too...

    return Redirect::to('/profile');
});
</code></pre>
<h4 id="qunlsession">Quản lý Session</h4>
<p>Đây chính là bài toán mà tôi gặp phải trong dự án của mình.</p>
<p>Vì HTTP là stateless (req sau không phụ thuộc vào kết quả req trước), vì vậy để lưu giữ dữ liệu giữa các page với nhau người ta sử dụng Session, ví dụ phổ biến nhất là token authentication được lưu vào Session để xác nhận người dùng đã đăng nhập vào hệ thống.</p>
<ul>
<li>Khác với cookie được lưu trữ ở phía client, session được lưu trữ ở server</li>
<li>Session lưu theo dạng key-val và mỗi user sẽ có 1 dữ liệu riêng</li>
</ul>
<p>Session được lưu trữ như thế nào?</p>
<ul>
<li>PHP thuần mặc định sẽ lưu trữ trong file (khi xem thông tin phpinfo() ta sẽ biết được path lưu trữ session), path lưu trữ session ta có thể config được trong file php.ini</li>
<li>Vấn đề trong Load Balancing với Session được lưu trữ qua file
<ul>
<li>Thông tin authentication của user được lưu trong Session mà Session lại được lưu trữ trong file =&gt; dữ liệu Session là không đồng nhất giữa các server web =&gt; Đây là nguyên nhân khiến cho user đã login bị logout ra khi request của họ bị forward sang server web khác với server nhận request login của họ.</li>
<li>Giải quyết như thế nào?
<ul>
<li>Sử dụng datastore chung để lưu trữ session: database, cache (memcached, reddis)</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Như đã nói ở trên, mặc dù đã thử đổi lưu trữ session qua database, cache nhưng user của tôi vẫn bị logout ra bất thình lình như trước. Thật là phiền toái, ngay lúc này tôi đã tìm đến một giải pháp tạm bợ là làm sao để cho những request của 1 user luôn luôn được redirect vào 1 web server mà thôi, đó là sử dụng thuật toán balancing của NGINX là ip hash, or sticky session</p>
<ul>
<li>Ip hash</li>
<li>Sticky session</li>
</ul>
<p>Sau khi áp dụng Ip hash thì vấn đề có vẻ đã được giải quyết, chỉ còn 1 cái là lúc user thay đổi mạng -&gt; IP thay đổi thì sẽ có nguy cơ họ lại bị logout bất  thình lình. Lỗi này vẫn có thể chấp nhận được vì xác suất xảy ra tương đối nhỏ. Một thời gian sau, khi xem xét lại quá trình deploy tôi nhận thấy (service của chúng tôi sử dụng Laravel Framework) mỗi khi deploy version mới thì user lại bị logout ra, xem kỹ hơn nữa tôi thấy là mỗi lần deploy lại tạo ra 1 APP_KEY mới, đọc doc về APP_KEY thì thấy  APP_KEY là một chuỗi bất kỳ dùng để encrypt session =&gt; đây chính là của nợ đã khiến cho user (sau khi hệ thống chuyển qua lưu session trên database hay cache) vẫn bị logout khi nhảy request giữa các web server.</p>
<p>=&gt; Bài học rút ra là chỉ sử dụng 1 APP_KEY cho các web server thôi.</p>
<p>Tổng hợp những phương pháp để Session đồng nhất khi sử dụng Load Balancing</p>
<ul>
<li>Lưu Session vào cookie: thay vì lưu trên server, data của Session được lưu trữ trên cookie, như vậy ta không cần quan tâm là request được forward ra đâu nữa. Tuy nhiên phương pháp này gặp phải vấn đề là giới hạn dung lượng data khi lưu trên cookie + vấn đề bảo mật dữ liệu Session khi dữ liệu Session không được mã hóa.</li>
<li>Sử dụng sticky Sessions: (hay còn gọi là session affinity) mỗi 1 client sẽ có 1 sticky session, và giá trị của nó sẽ quyết định request của nó được forward tới server nào.
<ul>
<li>Config trong HA Proxy</li>
</ul>
<pre><code class="language-sh">backend nodes
  # Other options above omitted for brevity
  cookie SRV_ID prefix
  server web01 127.0.0.1:9000 cookie check
  server web02 127.0.0.1:9001 cookie check
  server web03 127.0.0.1:9002 cookie check
</code></pre>
<ul>
<li>Config trong NGINX upstream</li>
</ul>
<pre><code class="language-sh">upstream app_example {
  ip_hash;                 
  server 127.0.0.1:9000;
  server 127.0.0.1:9001;
  server 127.0.0.1:9002;
}
</code></pre>
</li>
<li>Central Session Storage: lưu trữ Session tập trung -&gt; lưu Session vào database, cache thay vì lưu vào file.</li>
</ul>
<h4 id="mtthngtincaclient">Mất thông tin của Client</h4>
<p>Khi triển khai Load Balancing, mọi request mà các web server nhận được đều là từ Load Balancer node =&gt; khi trên server web ta cần thông tin của client như là IP, hostname mà client access, schema (http/https) mà client sử dụng.</p>
<p>Thật may là hầu như mọi Load Balancing đều hỗ trợ add những thông tin trên vào header để các web server có thể lấy được thông tin của Client. Ví dụ các header</p>
<ul>
<li><code>X-Forwarded-For</code>: có giá trị là IP của Client, chỉ ra request là thông qua proxy or load balancing</li>
<li><code>X-Forwarded-Host</code>: hostname mà Client truy cập vào ( là hostname của Load Balancer)</li>
<li><code>X-Forwarded-Proto / X-Forwarded-Scheme</code>: HTTP/HTTPS</li>
<li><code>X-Forwarded-Port</code>: port mà Client truy cập</li>
</ul>
<p>Khi có những thông tin trên trong header của request, web server có thể lấy được những thông tin cần thiết để audit request của client.</p>
<h4 id="ssltraffic">SSL Traffic</h4>
<p>SSL Termination</p>
<ul>
<li>Khi sử dụng SSL, thông thường Load Balancer sẽ decrypt các https request trước khi forward nó cho các web service. Còn gọi là SSL Termination (chấm dứt SSL) . Kỹ thuật này giúp cho web server giảm tải CPU vì ko phải decrypt SSL package.</li>
<li>Kỹ thuật này có 1 vấn đề là giữa Load Balancer và web server dữ liệu ko được mã hóa, dễ trở thành nạn nhân của  man-in-the-middle attacks (ngồi giữa mót của). Tuy nhiên đa phần Load Balancer và các web server là ở trên cùng cụm data center nên ta có thể hạn chế hoàn toàn khả năng bị tấn công bơi man-in-the-middle attacks.</li>
<li>Config trong HA Proxy</li>
</ul>
<pre><code class="language-sh">frontend localhost
    bind *:80
    bind *:443 ssl crt /etc/ssl/xip.io/xip.io.pem
    mode http
    default_backend nodes

backend nodes
    mode http
    balance roundrobin
    option forwardfor
    option httpchk HEAD / HTTP/1.1\r\nHost:localhost
    server web01 172.17.0.3:9000 check
    server web02 172.17.0.3:9001 check
    server web03 172.17.0.3:9002 check
    http-request set-header X-Forwarded-Port %[dst_port]
    http-request add-header X-Forwarded-Proto https if { ssl_fc }
</code></pre>
<p>SSL Pass-Through</p>
<ul>
<li>Load Balancer lúc này ko decrypt các request nữa mà pass thẳng luôn cho Web server</li>
<li>Kỹ thuật này sẽ khiến cho CPU của các web server phải chịu tải nhiều hơn vì phải decypt các request. Tuy nhiên nó cũng có hữu ích là giúp phòng chống DDos hiệu quả hơn (thiết lập chống DDos trên Load Balancer khi Load Balancer ko cần phải decrypt request sẽ hiệu quả hơn).</li>
<li>Kỹ thuật này chỉ sử dụng được khi công cụ Load Balancing hỗ trợ xủ lý với package ở tần TCP (ở tầng HTTP ta sẽ ko làm được).</li>
<li>Config cho HAProxy</li>
</ul>
<pre><code class="language-sh">frontend localhost
    bind *:80
    bind *:443
    option tcplog
    mode tcp
    default_backend nodes

backend nodes
    mode tcp
    balance roundrobin
    option ssl-hello-chk
    server web01 172.17.0.3:443 check
    server web02 172.17.0.4:443 check
</code></pre>
<h4 id="logging">Logging</h4>
<p>Khi có nhiều web server , mỗi web server lại có log riêng =&gt; ta phải tổng hợp lại để phân tích chung.</p>
<p>Ta có thể sử dụng các tool Centralize Logging như là</p>
<ul>
<li>Logstash</li>
<li>Flume</li>
<li>Fluend</li>
<li>Graylog2</li>
<li>Splunk</li>
<li>Syslog-ng</li>
<li>Rsyslog</li>
</ul>
<p>Hoặc các SaaS logger (log sẽ được gửi lên cloud của bên cung cấp và hỗ trợ quản lý, thao tác với log trên đó)</p>
<ul>
<li>Loggly</li>
<li>Splunk Storm</li>
<li>Paper Trail</li>
<li>Bugsnag</li>
</ul>
<h3 id="ktlun">Kết luận</h3>
<p>Ngày nay kiến trúc của service đã nhảy lên một level mới là migrate lên cloud so với trước đây, vì vậy đi kèm với nó là những vấn đề hóc búa hơn về mặt hệ thống mà chúng ta phải đối mặt, Load Balancing cũng là một ví dụ.</p>
<p>Tôi hy vọng bài viết của tôi phần nào cung cấp được một kiến thức đầy đủ để giúp các bạn tự tin xử lý những vấn đề khi ta làm việc với Load Balancing.</p>
<h3 id="thamkho">Tham khảo</h3>
<ul>
<li><a href="https://serversforhackers.com/so-you-got-yourself-a-loadbalancer">https://serversforhackers.com/so-you-got-yourself-a-loadbalancer</a></li>
<li><a href="http://blog.wsol.com/what-advantages-does-load-balancing-provide-for-web-servers">http://blog.wsol.com/what-advantages-does-load-balancing-provide-for-web-servers</a></li>
</ul>
<!--kg-card-end: markdown-->
            </section>

            <div class="post-footer">
                <div class="share-button">
                    <div class="fb-share-button" data-href="/load-balancing-cho-web-service/" data-layout="button_count" data-size="large" data-mobile-iframe="true">
                    </div>
                </div>

                <div class="share-button">
                    <a class="twitter-share-button" data-size="large" href="https://twitter.com/intent/tweet?text=Load%20balancing%20cho%20web%20service">
                        Tweet
                    </a>
                </div>

                <div class="share-button">
                    <div class="g-plusone" data-href="/load-balancing-cho-web-service/"></div>
                </div>
            </div>
            <div id="widget-for-reem-10-1"></div><script src="https://reem.vn/reem.js?m=10"></script>
        </article>


        <div class="post-comments">
            <div class="fb-comments" data-href="https://blog.vietnamlab.vn/load-balancing-cho-web-service/" data-numposts="10" data-order-by="reverse_time" data-width="100%"></div>
        </div>
</div>
<div class="col-lg-3">
    <div id="sidebar">

    <gcse:search></gcse:search>

    <div class='sidebar-box'>
        <div id="widget-for-reem-4-1"></div><script src="https://163.44.192.76/rem.js?m=4"></script>
    </div>
    <div class="sidebar-box">
        <div class="sidebar-title h2">Tuyển dụng</div>
        <div class="sidebar-content">
          <a class="title" href="https://blog.vietnamlab.vn/tuyen-dung">
            <img
              style="max-width: 100%"
              src="https://drive.google.com/uc?id=1aYKdTvr-4CYterc6pPPBYoFezghrkGZf"
              alt="Tuyển dụng">
          </a>
        </div>
    </div>

    <div class="sidebar-box">
        <div class="sidebar-title h2">Facebook</div>
        <div class="sidebar-content">
            <div class="fb-page" data-href="https://www.facebook.com/vietnamlab.vn" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-width="500" data-show-facepile="true">
                <blockquote cite="https://www.facebook.com/vietnamlab.vn" class="fb-xfbml-parse-ignore">
                    <a href="https://www.facebook.com/vietnamlab.vn">GMO-Z.com Vietnam Lab Center</a>
                </blockquote>
            </div>
        </div>
    </div>

    <div class="sidebar-box">
        <div class="sidebar-title h2">Mục lục</div>
        <div class="sidebar-content js-toc"></div>
    </div>

    
    <div class="sidebar-box">
        <div class="sidebar-title h2">Tin tức</div>
        <div class="sidebar-content">
                    <div class="media">
                        <div class="media-left">
                            <a href="../bao-cao-nghien-cuu-quy-3/index.html">
                                    <img style="object-fit: cover" class="media-object" src="../content/images/1CSKMZA-hwBOtsfRK0JjjcNZUrF80lGLt.PNG" width="50" height="50" alt="Báo cáo nghiên cứu quý 3 năm 2020">
                            </a>
                        </div>
                        <div class="media-body">
                            <a class="title" href="../bao-cao-nghien-cuu-quy-3/index.html">Báo cáo nghiên cứu quý 3 năm 2020</a>
                            <span>, 30 October 2020</span>
                        </div>
                    </div>
                    <div class="media">
                        <div class="media-left">
                            <a href="../untitled-9/index.html">
                                    <img style="object-fit: cover" class="media-object" src="https://drive.google.com/uc?id&#x3D;19caFAeGojP08PERt9NhyH-tZln5o1dyt&amp;export&#x3D;download" width="50" height="50" alt="Rộn ràng đón tết trung thu 2020">
                            </a>
                        </div>
                        <div class="media-body">
                            <a class="title" href="../untitled-9/index.html">Rộn ràng đón tết trung thu 2020</a>
                            <span>, 25 September 2020</span>
                        </div>
                    </div>
                    <div class="media">
                        <div class="media-left">
                            <a href="../truyen-thong-hoc-tieng-nhat/index.html">
                                    <img style="object-fit: cover" class="media-object" src="https://drive.google.com/uc?id&#x3D;19mB9PZcsjUoxU5mbNYE49Ai0dMUlOPt8&amp;export&#x3D;download" width="50" height="50" alt="Truyền Thống học tiếng Nhật tại VNLAB.">
                            </a>
                        </div>
                        <div class="media-body">
                            <a class="title" href="../truyen-thong-hoc-tieng-nhat/index.html">Truyền Thống học tiếng Nhật tại VNLAB.</a>
                            <span>, 14 August 2020</span>
                        </div>
                    </div>
                    <div class="media">
                        <div class="media-left">
                            <a href="../team-building-vuon-quoc-gia-ba-vi-2020/index.html">
                                    <img style="object-fit: cover" class="media-object" src="https://drive.google.com/uc?id&#x3D;1vCDL4ACVJLRYbc_bMUF-XtOkBYCmlvFL&amp;export&#x3D;download" width="50" height="50" alt="Team Building Vườn Quốc Gia Ba Vì 2020">
                            </a>
                        </div>
                        <div class="media-body">
                            <a class="title" href="../team-building-vuon-quoc-gia-ba-vi-2020/index.html">Team Building Vườn Quốc Gia Ba Vì 2020</a>
                            <span>, 30 June 2020</span>
                        </div>
                    </div>
                    <div class="media">
                        <div class="media-left">
                            <a href="../bao-cao-nghien-cuu-quy-1-nam-2020/index.html">
                                    <img style="object-fit: cover" class="media-object" src="https://drive.google.com/uc?id&#x3D;13zVnT-6TUc6EkCcZox_nn2PHeBSxihYm&amp;export&#x3D;download" width="50" height="50" alt="Báo cáo nghiên cứu Quý 1 năm 2020">
                            </a>
                        </div>
                        <div class="media-body">
                            <a class="title" href="../bao-cao-nghien-cuu-quy-1-nam-2020/index.html">Báo cáo nghiên cứu Quý 1 năm 2020</a>
                            <span>, 20 April 2020</span>
                        </div>
                    </div>
        </div>
    </div>

    <div class="sidebar-box">
        <div class="sidebar-title h2">Key words</div>
        <div class="sidebar-content">
                    <span class="label label-default text-justify tag">
                        <a href="../tag/%2508google-apps-script/index.html" title="google apps script" class="tag tag-5c2c443cc00d970001d28829 google-apps-script">google apps script</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="https://blog.vietnamlab.vn/404/" title="#api" class="tag tag-5e813cddf7370d0001b812c4 hash-api">#api</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="https://blog.vietnamlab.vn/404/" title="#drakov" class="tag tag-5ad30b8d83719800014583ed drakov">#drakov</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="https://blog.vietnamlab.vn/404/" title="#mock" class="tag tag-5e798cb6f7370d0001b812ae hash-mock">#mock</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="https://blog.vietnamlab.vn/404/" title="#test" class="tag tag-5e798cb6f7370d0001b812af hash-test">#test</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="https://blog.vietnamlab.vn/404/" title="#web" class="tag tag-5e813cddf7370d0001b812c5 hash-web">#web</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/10-meo-2/index.html" title="10 mẹo" class="tag tag-5ad30b8d837198000145843b 10-meo-2">10 mẹo</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/10-tips/index.html" title="10 tips" class="tag tag-5ad30b8d8371980001458432 10-tips">10 tips</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/2017/index.html" title="2017" class="tag tag-5ad30b8d8371980001458463 2017">2017</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/2018/index.html" title="2018" class="tag tag-5ad30b8d8371980001458464 2018">2018</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/2020/index.html" title="2020" class="tag tag-5e05cac4bf919d0001802e79 2020">2020</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/adaptive-threshold/index.html" title="adaptive threshold" class="tag tag-5ad30b8d8371980001458462 adaptive-threshold">adaptive threshold</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/adb/index.html" title="adb" class="tag tag-5d479f1fbf919d00018028c9 adb">adb</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/adsense/index.html" title="adsense" class="tag tag-5ad30b8d83719800014583a8 adsense">adsense</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/aff/index.html" title="aff" class="tag tag-5b6119898371980001458b0d aff">aff</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/agile/index.html" title="agile" class="tag tag-5ad30b8d837198000145834b agile">agile</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/ai/index.html" title="AI" class="tag tag-5ad30b8d8371980001458441 ai">AI</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/alert/index.html" title="alert" class="tag tag-5c2c443cc00d970001d2882a alert">alert</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/algorithm/index.html" title="Algorithm" class="tag tag-5e3bb937f7370d0001b8122e algorithm">Algorithm</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/android/index.html" title="android" class="tag tag-5ad30b8d837198000145834c android">android</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/android-studio/index.html" title="android studio" class="tag tag-5ad30b8d83719800014583ce android-studio">android studio</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/anguar-cli/index.html" title="anguar cli" class="tag tag-5ad30b8d837198000145834d anguar-cli">anguar cli</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/angular2/index.html" title="angular2" class="tag tag-5ad30b8d837198000145834e angular2">angular2</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/angular9/index.html" title="angular9" class="tag tag-5ea7b0b5f7370d0001b8132d angular9">angular9</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/ansible/index.html" title="Ansible" class="tag tag-5ad30b8d8371980001458450 ansible">Ansible</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/ant/index.html" title="ant" class="tag tag-5ad30b8d8371980001458398 ant">ant</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/apache/index.html" title="apache" class="tag tag-5ad30b8d837198000145834f apache">apache</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/apache-hive/index.html" title="Apache Hive" class="tag tag-5ad30b8d8371980001458351 apache-hive">Apache Hive</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/apache-knox/index.html" title="Apache Knox" class="tag tag-5ad30b8d8371980001458352 apache-knox">Apache Knox</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/apache-knox-gateway/index.html" title="Apache Knox Gateway" class="tag tag-5ad30b8d8371980001458353 apache-knox-gateway">Apache Knox Gateway</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/apache-poi/index.html" title="Apache POI" class="tag tag-5ad30b8d83719800014583d4 apache-poi">Apache POI</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/api/index.html" title="api" class="tag tag-5ad30b8d83719800014583c1 api">api</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/apiary-editor/index.html" title="apiary editor" class="tag tag-5ad30b8d83719800014583bf apiary-editor">apiary editor</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/application/index.html" title="application" class="tag tag-5bc99b038f5b6d0001832bfa application">application</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/ar/index.html" title="ar" class="tag tag-5ad30b8d8371980001458404 ar">ar</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/artoolkit/index.html" title="artoolkit" class="tag tag-5ad30b8d8371980001458405 artoolkit">artoolkit</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/aso/index.html" title="aso" class="tag tag-5b6119898371980001458b08 aso">aso</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/association-rules/index.html" title="Association Rules" class="tag tag-5ad30b8d83719800014583c5 association-rules">Association Rules</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/asynchronous/index.html" title="asynchronous" class="tag tag-5ad30b8d8371980001458355 asynchronous">asynchronous</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/atom/index.html" title="atom" class="tag tag-5ad30b8d83719800014583fd atom">atom</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/autoencoder/index.html" title="autoencoder" class="tag tag-5bfa780f165b57000125175c autoencoder">autoencoder</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/automation-testing/index.html" title="automation testing" class="tag tag-5ad30b8d83719800014583fe automation-testing">automation testing</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/awk/index.html" title="awk" class="tag tag-5ad30b8d8371980001458356 awk">awk</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/aws/index.html" title="AWS" class="tag tag-5ee65390f7370d0001b813e7 aws">AWS</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/aws-certified/index.html" title="AWS Certified" class="tag tag-5f262d1bf7370d0001b8146b aws-certified">AWS Certified</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/backend/index.html" title="backend" class="tag tag-5b30687483719800014589a0 backend">backend</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/backend2018/index.html" title="backend2018" class="tag tag-5b30687483719800014589a1 backend2018">backend2018</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/bao-cao/index.html" title="báo cáo" class="tag tag-5f9a48c4128d0900010f5c3f bao-cao">báo cáo</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/basictype/index.html" title="BasicType" class="tag tag-5ad30b8d83719800014583d9 basictype">BasicType</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/bcrypt/index.html" title="bcrypt" class="tag tag-5d96a6f2bf919d0001802d24 bcrypt">bcrypt</a>
                    </span>
        </div>
    </div>
</div>
</div>
<div class="col-lg-offset-1"></div>


    </div>

    <div id="footer">
        <div class="row">
            <div class="col-lg-offset-1 col-lg-10 copyright">
                <a href="../index.html">GMO-Z.com Vietnam Lab Center Technology Blog</a> &copy; 2020
            </div>
            <div class="col-lg-offset-1"></div>
        </div>
    </div>

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-166653304-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-166653304-2');
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59342535-1', 'auto');
  ga('send', 'pageview');
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)']]
  },
  svg: {
    fontCache: 'global'
  }
};
</script>

<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Libraries -->
    <script type="text/javascript" src="../assets/js/libs/jquery.fitvids.min.js?v=52156bd6b0"></script>
    <script type="text/javascript" src="../assets/js/libs/tocbot.min.js?v=52156bd6b0"></script>
    <script type="text/javascript" src="../assets/js/libs/bootstrap.min.js?v=52156bd6b0"></script>
    <script type="text/javascript" src="../assets/js/libs/highlight.pack.js?v=52156bd6b0"></script>

    <!-- Custom JS -->
    <script type="text/javascript" src="../assets/js/app/index.js?v=52156bd6b0"></script>

    <!-- App Services -->
    <script type="text/javascript" charset="UTF-8" src="https://cache.img.gmo.jp/common_header/script.js" async></script>
    <script src="https://apis.google.com/js/platform.js" async defer>{ lang: 'vi' }</script>

</body>

</html>