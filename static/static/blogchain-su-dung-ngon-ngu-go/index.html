<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Blockchain với Golang: Persistence và CLI | GMO-Z.com Vietnam Lab Center</title>
    <meta name="description" content="Tiếp tục series Blockchain với Golang, lần này bài viết sẽ hướng dẫn cách lưu data của blockchain vào database và cách tạo một CLI interface cho chương trình." />
    <meta property="fb:app_id" content="703042457154743" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google-site-verification" content="duCCqsDAWLg3POOfPMr6JiS4R0g0CjouGGM3fhsG0-0" />
    <link rel="shortcut icon" href="../favicon.ico">

    <!-- Stylesheet -->
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap.min.css?v=52156bd6b0" />
    <link rel="stylesheet" type="text/css" href="../assets/css/font-awesome.min.css?v=52156bd6b0" />
    <link rel="stylesheet" type="text/css" href="../assets/css/atom-one-dark.min.css?v=52156bd6b0" />
    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css?v=52156bd6b0" />

    <script type="text/javascript" src="../assets/js/libs/jquery.min.js?v=52156bd6b0"></script>

    <meta name="description" content="Tiếp tục series Blockchain với Golang, lần này bài viết sẽ hướng dẫn cách lưu data của blockchain vào database và cách tạo một CLI interface cho chương trình." />
    <link rel="canonical" href="index.html" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <link rel="amphtml" href="amp/index.html" />
    
    <meta property="og:site_name" content="GMO-Z.com Vietnam Lab Center Technology Blog" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Blockchain với Golang: Persistence và CLI" />
    <meta property="og:description" content="Tiếp tục series Blockchain với Golang, lần này bài viết sẽ hướng dẫn cách lưu data của blockchain vào database và cách tạo một CLI interface cho chương trình." />
    <meta property="og:url" content="https://blog.vietnamlab.vn/blogchain-su-dung-ngon-ngu-go/" />
    <meta property="og:image" content="https://drive.google.com/uc?id&#x3D;1j4MN_AgpzlvSjRM3k9loe-71AoX-bxTm&amp;export&#x3D;download" />
    <meta property="article:published_time" content="2018-09-04T01:23:33.000Z" />
    <meta property="article:modified_time" content="2018-09-04T01:23:33.000Z" />
    <meta property="article:tag" content="blockchain" />
    <meta property="article:tag" content="golang" />
    <meta property="article:tag" content="programming" />
    
    <meta property="article:publisher" content="https://www.facebook.com/vietnamlab.vn" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Blockchain với Golang: Persistence và CLI" />
    <meta name="twitter:description" content="Tiếp tục series Blockchain với Golang, lần này bài viết sẽ hướng dẫn cách lưu data của blockchain vào database và cách tạo một CLI interface cho chương trình." />
    <meta name="twitter:url" content="https://blog.vietnamlab.vn/blogchain-su-dung-ngon-ngu-go/" />
    <meta name="twitter:image" content="https://drive.google.com/uc?id&#x3D;1j4MN_AgpzlvSjRM3k9loe-71AoX-bxTm&amp;export&#x3D;download" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="T.M.L" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="blockchain, golang, programming" />
    <meta property="og:image:width" content="1500" />
    <meta property="og:image:height" content="500" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "GMO-Z.com Vietnam Lab Center Technology Blog",
        "url": "https://blog.vietnamlab.vn/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://blog.vietnamlab.vn/favicon.ico",
            "width": 48,
            "height": 48
        }
    },
    "author": {
        "@type": "Person",
        "name": "T.M.L",
        "url": "https://blog.vietnamlab.vn/author/linhtm/",
        "sameAs": []
    },
    "headline": "Blockchain với Golang: Persistence và CLI",
    "url": "https://blog.vietnamlab.vn/blogchain-su-dung-ngon-ngu-go/",
    "datePublished": "2018-09-04T01:23:33.000Z",
    "dateModified": "2018-09-04T01:23:33.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "https://drive.google.com/uc?id=1j4MN_AgpzlvSjRM3k9loe-71AoX-bxTm&export=download",
        "width": 1500,
        "height": 500
    },
    "keywords": "blockchain, golang, programming",
    "description": "Series lập trình blockchain với Go\n\n 1. Block và blockchain sơ khai\n    [https://blog.vietnamlab.vn/2018/03/19/blockchain-bang-ngon-ngu-go-1st-step-block-va-blockchain-so-khai/]\n 2. Proof of Work\n    [https://blog.vietnamlab.vn/2018/06/29/blockchain-bang-ngon-ngu-go-s/]\n\nLời mở đầu\nQua hai bài viết trước của series, chúng ta đã lập trình được một blockchain đơn\ngiản với khả năng mining để tạo block mới sử dụng thuật toán Proof of Work. Tuy\nnhiên, thông tin tất cả các block vẫn chưa được lưu trữ ",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://blog.vietnamlab.vn/"
    }
}
    </script>

    <meta name="generator" content="Ghost 3.36" />
    <link rel="alternate" type="application/rss+xml" title="GMO-Z.com Vietnam Lab Center Technology Blog" href="../rss/index.html" />
</head>

<body class="post-template tag-blockchain tag-golang tag-programming nav-closed">
    <script type="text/javascript" src="../assets/js/app/social.js?v=52156bd6b0"></script>
    <div id="fb-root"></div>

    <div id="header">
        <div id="blog-banner">
    <div class="row">
        <div class="col-md-offset-1 col-md-5">
            <img src="../assets/img/vnlab_logo.jpg?v=52156bd6b0" alt="VNLab Logo">
        </div>
        <div class="col-md-5 text-right coworker">
            <img src="../assets/img/vnlab_coworker.jpg?v=52156bd6b0" alt="VNLab coworker">
        </div>
        <div class="col-md-offset-1"></div>
    </div>
</div>

<nav class="navbar navbar-default">
    <div class="row">
        <div class="col-md-offset-1 col-md-10">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                        <li class="">
                            <a class="https://vietnamlab.vn" href="https://vietnamlab.vn">GMO-Z.com Vietnam Lab Center</a>
                        </li>
                        <li class="">
                            <a class="/tag/news/" href="../tag/news/index.html">Tin tức</a>
                        </li>
                        <li class="">
                            <a class="/" href="../index.html">Blog</a>
                        </li>
                        <li class="">
                            <a class="/tuyen-dung/" href="../tuyen-dung/index.html">★ Tuyển dụng ★</a>
                        </li>
                </ul>

                <ul class="nav navbar-nav navbar-right">
                        <li><a class="subscribe-button icon-feed" href="../rss/index.html">Đăng ký</a></li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <div class="col-md-offset-1"></div>
        <!-- /.container-fluid -->
    </div>
</nav>

    </div>

    <div id="body" class="row">
        
<div class="col-lg-offset-1 col-lg-7">
        <article class="post tag-blockchain tag-golang tag-programming js-toc-content">
            <div class="post-header">
                <h2 class="post-title"><a href="index.html">Blogchain bằng ngôn ngữ Go - 3rd Step: Lưu trữ data trên ổ cứng và giao diện CLI</a></h2>
            </div>

            <div class="post-meta">
                <div class="post-date" datetime="2018-09-04">
                    <i class="fa fa-clock-o" aria-hidden="true"></i> 04 September 2018
                </div>
                <div class="post-tag">
                    <i class="fa fa-tags" aria-hidden="true"></i> <a href="../tag/blockchain/index.html">blockchain</a>, <a href="../tag/golang/index.html">golang</a>, <a href="../tag/programming/index.html">programming</a>
                </div>
            </div>

            <div class="post-featured post-featured-single">
                <div class="post-featured-img">
                        <img src="https://drive.google.com/uc?id&#x3D;1j4MN_AgpzlvSjRM3k9loe-71AoX-bxTm&amp;export&#x3D;download" alt="Blogchain bằng ngôn ngữ Go - 3rd Step: Lưu trữ data trên ổ cứng và giao diện CLI">
                </div>

                <div class="post-author">
                </div>

                <div class="post-share">
                    <div class="share-button">
                        <div class="fb-share-button" data-href="/blogchain-su-dung-ngon-ngu-go/" data-layout="button" data-size="large" data-mobile-iframe="true">
                        </div>
                    </div>

                    <div class="share-button">
                        <a class="twitter-share-button" data-size="large" href="https://twitter.com/intent/tweet?text=Blogchain%20b%E1%BA%B1ng%20ng%C3%B4n%20ng%E1%BB%AF%20Go%20-%203rd%20Step%3A%20L%C6%B0u%20tr%E1%BB%AF%20data%20tr%C3%AAn%20%E1%BB%95%20c%E1%BB%A9ng%20v%C3%A0%20giao%20di%E1%BB%87n%20CLI">
                            Tweet
                        </a>
                    </div>
                </div>
            </div>

            <section class="post-content">
                <!--kg-card-begin: markdown--><p><em>Series lập trình blockchain với Go</em></p>
<ol>
<li><a href="https://blog.vietnamlab.vn/2018/03/19/blockchain-bang-ngon-ngu-go-1st-step-block-va-blockchain-so-khai/">Block và blockchain sơ khai</a></li>
<li><a href="https://blog.vietnamlab.vn/2018/06/29/blockchain-bang-ngon-ngu-go-s/">Proof of Work</a></li>
</ol>
<h3 id="limu">Lời mở đầu</h3>
<p>Qua hai bài viết trước của series, chúng ta đã lập trình được một blockchain đơn giản với khả năng mining để tạo block mới sử dụng thuật toán Proof of Work. Tuy nhiên, thông tin tất cả các block vẫn chưa được lưu trữ cố định và sẽ biến mất hoàn toàn khi chương trình kết thúc. Chương trình blockchain cũng chưa có một giao diện câu lệnh (CLI) để người dùng có thể tương tác một cách dễ dàng hơn. Trong phần tiếp theo này, chúng ta sẽ add thêm tính năng lưu trữ thông tin blockchain trên hard disk và 1 giao diện câu lệnh (CLI) cho blockchain của chúng ta</p>
<h3 id="lutrdata">Lưu trữ data</h3>
<h4 id="lachndatabasedb">Lựa chọn Database (DB)</h4>
<p>Như đã nói, blockchain của chúng ta hoàn toàn lưu thông tin các block đã đào được trên memory và khi chương trình kết thúc thì tất cả các thông tin này sẽ không được lưu trữ. Một blockchain thật sự cần có data được lưu trữ trên hard disk để có tái sử dụng thông tin các block đã đào được, chia sẻ thông tin với những người sử dụng khác. Với <a href="https://github.com/bitcoin/bitcoin">Bitcoin</a> thì DB được sử dụng là  <a href="https://github.com/google/leveldb">LevelDB</a>, một Key-Value DB viết bằng C++ của Google. Chúng ta cũng sẽ sử dụng 1 Key-Value datatabase, tuy nhiên là một database được viết hoàn toàn bằng Go: <a href="https://github.com/dgraph-io/badger">Badger</a>. Lí do để sử dụng Badger:</p>
<ol>
<li>Được viết hoàn toàn bằng Go, có thể được import vào chương trình 1 cách dễ dàng như một thư viện</li>
<li>Đơn giản, dễ dùng, không cần có DB server để có thể hoạt động</li>
<li>Dù là Key-Value, nhưng đáp ứng đủ nhu cầu cho bài toán của chúng ta ở đây</li>
</ol>
<p>Với Badger thì sẽ không có data type mà cả Key và Value sẽ có định dạng là các mảng <code>byte</code>. Do vậy, để có thể lưu các cấu trúc dữ liệu và đọc lại chúng từ Badger, chúng ta cần phải có công cụ để <code>serialize</code> và <code>deserialize</code> chúng. Ta sẽ dùng thư viện <a href="https://golang.org/pkg/encoding/gob/">encoding/gob</a>, một thư viện trong standard library của Go, để giải quyết vấn đề này.</p>
<h4 id="cutrcdliu">Cấu trúc dữ liệu</h4>
<p>Trước khi lập trình các logic code để lưu dữ liệu, chúng ta cần xác định dữ liệu của chúng ta cần lưu gồm có các thông tin gì và sẽ được lưu với cấu trúc như thế nào. Bitcoin hiện tại lưu dữ liệu vào hai phần chính như sau:</p>
<ol>
<li><strong>blocks</strong> lưu trữ metadata mô tả về tất cả các blocks của blockchain</li>
<li><strong>chainstate</strong> lưu trữ trạng thái hiện tại của blockchain, bao gồm tất cả những transaction chưa được xử lý kèm theo một số metadata của chúng</li>
</ol>
<p>Mỗi block sẽ được lưu trữ là một riêng biệt để tối ưu hoá performance. Và khi lưu trữ vào LevelDB thì <strong>blocks</strong> sẽ là những cặp Key - Value như sau:</p>
<ol>
<li><strong>'b' + 32-byte block hash</strong> -&gt; thông tin block index</li>
<li><strong>'f' + 4-byte file number</strong> -&gt; thông tin về file information</li>
<li><strong>'l' -&gt; 4-byte file number</strong> -&gt; Số thứ tự của file block cuối cùng được tạo</li>
<li><strong>'R' -&gt; 1-byte boolean</strong> -&gt; flag thể hiện xem chain có đang được reindex hay không</li>
<li><strong>'F' + 1-byte flag name length + flag name string</strong> -&gt; 1 byte boolean: các thể loại flag có thể mang giá trị on hay of</li>
<li><strong>'t' + 32-byte transaction hash</strong> -&gt; thông tin về transaction index</li>
</ol>
<p>In chainstate, the key -&gt; value pairs are:</p>
<ol>
<li><strong>'c' + 32-byte transaction hash</strong> -&gt; thông tin về unspent transaction output (<a href="https://bitcoin.org/en/glossary/unspent-transaction-output">UTXOS</a> của một transaction</li>
<li><strong>'B' -&gt; 32-byte block hash</strong> -&gt; hash của block, lưu trữ các thông tin unspent transaction output (<a href="https://bitcoin.org/en/glossary/unspent-transaction-output">UTXOS</a> của block này</li>
</ol>
<p>Tuy nhiên, với blockchain đơn giản của chúng ta, do chưa có transactions và tất cả thông tin blocks sẽ được lưu chung vào một file nên chỉ cần 2 cặp Key-Value như sau:</p>
<ol>
<li><strong>32-byte block-hash</strong> -&gt; Structure của block (đã được serialized)</li>
<li><strong>'l'</strong> -&gt; Hash của block mới nhất trong chain</li>
</ol>
<h4 id="serializevdeserialize">Serialize và deserialize</h4>
<p>Do các cặp Key-Value trong Badger đều được lưu dưới dạng <code>[]byte</code> mà chúng ta muốn lưu trữ thông tin block dưới dạng các struct <code>Block</code> vào DB nên ta sẽ sử dụng thư viện <a href="https://golang.org/pkg/encoding/gob/">encoding/gob</a> để thực hiện công việc serialize và deserialize</p>
<p>Đầu tiên là method <code>Serialize</code> cho 1 struct <code>Block</code>.</p>
<pre><code class="language-go">// block.go
// Serialize serialize block to byte data
func (b *Block) Serialize() []byte {
	var result bytes.Buffer
	encoder := gob.NewEncoder(&amp;result)

	err := encoder.Encode(b)

	if err != nil {
		log.Panic(err)
	}

	return result.Bytes()
}
</code></pre>
<p>Code của method khá đơn giản, đầu tiên ta khai báo 1 buffer để lưu thông tin block đã được serialized, sử dụng gob encoder để encode thông tin block, sau đó trả về dưới dạng 1 byte array.</p>
<p>Tiếp theo là function <code>DeserializeBlock</code>, tuy nhiên đây sẽ không phải là method cho một struct <code>Block</code> mà là 1 function riêng</p>
<pre><code class="language-go">// block.go
// DeserializeBlock deserialize block from byte data
func DeserializeBlock(d []byte) *Block {
	var block Block

	decoder := gob.NewDecoder(bytes.NewReader(d))
	err := decoder.Decode(&amp;block)

	if err != nil {
		log.Panic(err)
	}

	return &amp;block
}
</code></pre>
<h4 id="lutrdata">Lưu trữ Data</h4>
<p>Trước tiên, ta phải thêm Badger vào dependencies vào project blockchain của chúng ta:</p>
<pre><code class="language-sh">$ dep ensure -add github.com/dgraph-io/badger
</code></pre>
<p>Sau đó, trong code, badger có thể được import và sử dụng như các thư viện standard khác của Go</p>
<pre><code class="language-go">import (
	&quot;log&quot;

	&quot;github.com/dgraph-io/badger&quot;
)
</code></pre>
<p>Ta cũng tạo một file mới <code>db_util.go</code> chứa các function liên quan đến xử lý DB. Đầu tiên là function để khởi tạo một instance của Badger:</p>
<pre><code class="language-go">/ InitDB create database instance
func InitDB(dbDir string) *badger.DB {
	opts := badger.DefaultOptions
	var dbRootPath string

	if runtime.GOOS == &quot;windows&quot; {
		dbRootPath = &quot;C:/tmp&quot;
	} else {
		dbRootPath = &quot;/tmp&quot;
	}

	dbPath := filepath.FromSlash(dbRootPath + &quot;/&quot; + dbDir)
	opts.ValueDir = dbPath
	opts.Dir = dbPath
	db, err := badger.Open(opts)

	if err != nil {
		log.Panic(err)
	}

	return db
}
</code></pre>
<p>Function này chỉ đơn giản là khởi tạo một instance Badger với thiết lập địa chỉ lưu trữ database được lấy từ tham số của hàm.</p>
<p>Để sử dụng Badger trong code của Blockchain của chúng ta, trước mắt chúng ta khai báo 2 biến constant, một là folder chứa data và một là prefix cho tất cả các Key của dữ liệu của chúng ta.</p>
<pre><code class="language-go">// blockchain.go
const dbDirectory = &quot;gochain&quot;
const dbPrefix = &quot;gc_&quot;
</code></pre>
<p>Việc tiếp theo là  sửa lại function <code>NewBlockchain</code> trong file <code>blockchain.go</code>. Về mặt logic, function này phải làm được những bước sau:</p>
<ul>
<li>Tạo một instance DB</li>
<li>Kiểm tra xem đã có thông tin blockchain trong chưa?</li>
<li>Nếu đã có thông tin blockchain:
<ol>
<li>Tạo mới 1 <code>Blockchain</code> instance.</li>
<li>Thiết lập để tip của <code>Blockchain</code> instance này trỏ đến hash của block mới nhất được lưu trong DB.</li>
</ol>
</li>
<li>Nếu không có thông tin blockchain:
<ol>
<li>Tạo block genesis.</li>
<li>Lưu block trong DB.</li>
<li>Lưu hash của genesis block trong DB với vai trò là hash của block mới nhất.</li>
<li>Tạo mới 1 <code>Blockchain</code> instance với tip trỏ trến block genesis.</li>
</ol>
</li>
</ul>
<p>Nếu thể hiện bằng code thì sẽ như sau:</p>
<pre><code class="language-go">// blockchain.go
// NewBlockchain initiate a new chain
func NewBlockchain() *Blockchain {
	db := InitDB(dbDirectory)
	isDataExist := CheckPrefixExist(dbPrefix, db)

	var tip []byte
	err := db.Update(func(txn *badger.Txn) error {
		if isDataExist {
			item, err := txn.Get([]byte(dbPrefix + &quot;l&quot;))
			if err != nil {
				return err
			}

			tip, err = item.Value()

			if err != nil {
				return err
			}
		} else {
			genesis := NewGenesisBlock()
			err := txn.Set(append([]byte(dbPrefix), genesis.Hash...), genesis.Serialize())
			if err != nil {
				return err
			}

			err = txn.Set([]byte(dbPrefix+&quot;l&quot;), genesis.Hash)
			if err != nil {
				return err
			}

			tip = genesis.Hash
		}

		return nil
	})

	if (err != nil) {
		log.Panic(err)
	}

	return &amp;Blockchain{tip, db}
}
</code></pre>
<p>Với Badger thì tất cả các xử lý với DB phải được thực hiện trong một transaction, với đoạn code ở trên thì ta đã sử dụng một transaction Read-Update của Badger:</p>
<pre><code class="language-go">err := db.Update(func(txn *badger.Txn) error {
...
}
</code></pre>
<p>Trong body của transaction Read-Update này ta có thể thực hiện các thao tác đọc và ghi dữ liệu dưới dạng Key-Value. Có thể thấy là với mỗi lần đọc ghi, ta đều gán thêm <code>dbPrefix</code> vào phía trước của Key:</p>
<pre><code class="language-go">item, err := txn.Get([]byte(dbPrefix + &quot;l&quot;))
...
err := txn.Set(append([]byte(dbPrefix), genesis.Hash...), 
...
</code></pre>
<p>Function <code>CheckPrefixExist</code> dùng để check xem có dữ liệu blockchain hay chưa được implement ở trong file <code>db_util</code> như sau</p>
<pre><code class="language-go">// db_util.go
// CheckPrefixExist check if there is data for this prefix in the database
func CheckPrefixExist(prefix string, db *badger.DB) bool {
	var isPrefixExist bool
	err := db.View(func(txn *badger.Txn) error {
		opts := badger.DefaultIteratorOptions
		opts.PrefetchValues = false // Vì chỉ cần check key nên ta chỉ get key, không lấy giá trị value nhằm tăng performance
		it := txn.NewIterator(opts) // Tạo 1 Iterator mới
		defer it.Close()
		prefix := []byte(dbPrefix)

        // Check lần lượt xem có key nào có prefix ứng với prefix đã truyền vào không, nếu có thì break
		for it.Seek(prefix); it.ValidForPrefix(prefix); it.Next() {
			isPrefixExist = true
			break
		}

		return nil
	})

	if (err != nil) {
		log.Panic(err)
	}

	return isPrefixExist
}
</code></pre>
<p>Vì ở đây chỉ cần đọc dữ liệu nên ta sử dụng transaction Read Only của Badger</p>
<pre><code class="language-go">err := db.View(func(txn *badger.Txn) error {
...
})
</code></pre>
<p>Ngoài ra, để check xem liệu trong DB đã tồn tại Key có prefix như prefix đã định chưa thì ta sử dụng tính năng Iterator của Badger để duyệt lần lượt các key trong DB.</p>
<p>Quay lại đoạn code của <code>NewBlockchain</code> ta thấy cách khởi tạo 1 <code>Blockchain</code> instance cũng đã có thay đổi:</p>
<pre><code class="language-go">return &amp;Blockchain{tip, db}
</code></pre>
<p>Chúng ta không lưu toàn bộ thông tin blocks vào một trường của struct nữa mà chỉ lưu hash của block mới nhất (tip). Ngoài ra, một DB connection cũng được lưu, trong khi chương trình đang chạy, connection này sẽ luôn được mở và đi kèm với <code>Blockchain</code> instance. ```Blockchain`` struct hiện tại sẽ trở thành như sau:</p>
<pre><code class="language-go">type Blockchain struct {
	tip []byte
	db  *badger.DB
}
</code></pre>
<p>Tiếp theo, chúng ta cũng phải sửa <code>AddBlock</code> method, một block mới sẽ được lưu vào DB thay vì chỉ là add 1 phần tử vào array như trước:</p>
<pre><code class="language-go">// blockchain.go
// AddBlock add new block
func (bc *Blockchain) AddBlock(data string) {
	var lastHash []byte

	err := bc.db.View(func(txn *badger.Txn) error {
		item, err := txn.Get([]byte(dbPrefix + &quot;l&quot;))
		if err != nil {
			log.Panic(err)
		}

		lastHash, err = item.Value()

		if err != nil {
			return err
		}

		return nil
	})

	newBlock := NewBlock(data, lastHash)

	err = bc.db.Update(func(txn *badger.Txn) error {
		err = txn.Set(append([]byte(dbPrefix), newBlock.Hash...), newBlock.Serialize())
		if err != nil {
			return err
		}

		err = txn.Set([]byte(dbPrefix + &quot;l&quot;), newBlock.Hash)
		if err != nil {
			return err
		}

		bc.tip = newBlock.Hash

		return nil
	})
}
</code></pre>
<p>Ta sẽ đọc hash của block mới nhất từ DB, sau đó, dùng hash này để tạo một block mới (mining), sau đó serialize thông tin của block mới, lưu vào DB. Ta cũng update giá trị của Key <code>dbPrefix + &quot;l&quot;</code> là hash của block mới này và thiết lập tip của instance <code>Blockchain</code> là hash này.</p>
<p>Sau vài đoạn code dài, vậy là chúng ta đã hoàn thành việc thay đổi cơ chế lưu dữ liệu của blockchain từ tạm thời (array trên bộ nhớ) sang lưu trên 1 DB trên hard disk. Tiếp theo sẽ là việc đọc thông tin ra như thế nào.</p>
<h4 id="cthngtincablockchain">Đọc thông tin của blockchain</h4>
<p>Toàn bộ các blocks của chain đã được lưu trên DB, nên dù khi ta có dừng chương trình và sau đó chạy lại ta vẫn có thể mở lại kết nối với blockchain đã lưu và add thêm block mới được. Tuy nhiên, vì không phải làm một array nữa, nên ta sẽ không dễ dàng in toàn bộ các blocks chain ra được nữa.</p>
<p>Badger có cung cấp các Iterator method để ta có duyệt các cặp Key-Value được lưu trong DB, tuy nhiên chúng sẽ duyệt theo thứ tự giá trị của các Key chứ không theo thứ tự data được lưu vào. Do vậy, chúng ta sẽ tự lập trình 1 Iterator để có thể duyệt thông tin block theo thứ tự được add vào. Dưới đây là struct <code>BlockchainIterator</code> ta sẽ dùng để làm công việc duyệt block:</p>
<pre><code>// blockchain.go
type BlockchainIterator struct {
	currentHash []byte
	db          *badger.DB
}
</code></pre>
<p>Mỗi lần ta muốn duyệt blocks trong blockchain, ta sẽ tạo instance <code>BlockchainIterator</code> như trên và instance này sẽ lưu hash của block hiện tại và 1 kết nối tới DB. Do đó, 1 Iterator sẽ luôn đi kèm với 1 blockchain và sẽ được tạo bởi 1 method của <code>Blockchain</code>:</p>
<pre><code class="language-go">// blockchain.go
// Iterator create an iterator for a blockchain instance
func (bc *Blockchain) Iterator() *BlockchainIterator {
	bci := &amp;BlockchainIterator{bc.tip, bc.db}
	return bci
}
</code></pre>
<p>Vì 1 Iterator ban đầu sẽ trở đến tip một blockchain, nên blocks sẽ được duyệt từ mới nhất đến cũ nhất. Tiếp theo, ta sẽ tạo method <code>Next</code> cho <code>BlockchainIterator</code>, method trả về block trước đó của block hiện tại trong blockchain</p>
<pre><code class="language-go">// blockchain.go
// Next iterate to next element
func (i *BlockchainIterator) Next() *Block {
	var block *Block

	err := i.db.View(func(txn *badger.Txn) error {
		item, err := txn.Get(append([]byte(dbPrefix), i.currentHash...))
		if err != nil {
			return err
		}

		encodedBlock, err := item.Value()

		if err != nil {
			return err
		}

		block = DeserializeBlock(encodedBlock)
		return nil
	})

	if err != nil {
		log.Panic(err)
	}

	i.currentHash = block.PrevBlockHash
	return block
}
</code></pre>
<p>Khi này, đoạn code để hiển thị thông tin toàn bộ blocks sẽ trở thành như sau:</p>
<pre><code class="language-go">bc := NewBlockchain()
bci := bc.Iterator()

for {
	block := bci.Next()

	fmt.Printf(&quot;Prev block's hash: %x\n&quot;, block.PrevBlockHash)
	fmt.Printf(&quot;Current block's hash: %x\n&quot;, block.Hash)
	fmt.Printf(&quot;Current block's data: %s\n&quot;, block.Data)

	pow := InitProofOfWork(block)
	fmt.Printf(&quot;PoW: %s\n&quot;, strconv.FormatBool(pow.Validate()))
	fmt.Println()

	if len(block.PrevBlockHash) == 0 {
		break
	}
}
</code></pre>
<p>Vậy là các tính năng cơ bản với DB cho blockchain đơn giản của chúng ta đã được hoàn thành xong! Tiếp theo sẽ là giao diện CLI</p>
<h3 id="cliinterface">CLI Interface</h3>
<p>Từ trước đến giờ, chương trình của chúng ta chưa hỗ trợ việc tương tác với chương trình, các thao tác đều được hard-coded vào thẳng chương trình. Ta sẽ lập trình giao diện CLI, để người dùng có thể add block mới và xem toàn bộ thông tin các blocks từ command line.</p>
<p>Ta có thể sử dụng standard library của Go để thực hiện các tính năng này, tuy nhiên để việc lập trình được nhanh và dễ dàng hơn ta sẽ sử dụng thư viện <a href="https://github.com/urfave/cli">urfave/cli</a>.</p>
<pre><code class="language-sh">$ dep ensure -add github.com/urfave/cli
</code></pre>
<p>Và import nó ở trong file main</p>
<pre><code class="language-go">// main.go
import (
	&quot;fmt&quot;
	&quot;log&quot;
	&quot;os&quot;
	&quot;strconv&quot;

	&quot;github.com/urfave/cli&quot;
)
</code></pre>
<p>Sử dụng thư viện này cũng khá đơn giản, hàm <code>main</code> của chúng ta sẽ trở thành như sau:</p>
<pre><code class="language-go">// main.go
func main() {
	app := cli.NewApp()

	bc := NewBlockchain()
	defer bc.db.Close()

	app.Commands = []cli.Command{
		{
			Name:    &quot;addblock&quot;,
			Aliases: []string{&quot;ab&quot;},
			Usage:   &quot;add a new block to the chain&quot;,
			Flags: []cli.Flag{
				cli.StringFlag{
					Name:  &quot;data, d&quot;,
					Usage: &quot;data for the new block&quot;,
				},
			},
			Action: func(c *cli.Context) error {
				blockData := c.String(&quot;data&quot;)

				if blockData == &quot;&quot; {
					cli.ShowCommandHelpAndExit(c, &quot;addblock&quot;, 1)
				}
				bc.AddBlock(blockData)

				return nil
			},
		},
		{
			Name:    &quot;printchain&quot;,
			Aliases: []string{&quot;p&quot;},
			Usage:   &quot;add a new block to the chain&quot;,
			Action: func(c *cli.Context) error {
				bci := bc.Iterator()

				for {
					block := bci.Next()
                    ...
					if len(block.PrevBlockHash) == 0 {
						break
					}
				}

				return nil
			},
		},
    }

	err := app.Run(os.Args)
	if err != nil {
		log.Panic(err)
	}
}
</code></pre>
<p>Sử dụng <code>urfave/cli</code>, ta tạo entry point cho chương trình của mình:</p>
<pre><code class="language-go">// main.go
app := cli.NewApp()
</code></pre>
<p>Sau đó, add các command mà ta muốn chương trình hỗ trợ vào entry point này. Mỗi command sẽ là 1 instance của struct <code>cli.Command</code>. Vì chương trình sẽ có 2 command là tạo block mới và xem tất cả các block đã có nên list commands truyền vào sẽ có 2 phần tử như đoạn code ở dưới. Mỗi command này sẽ thực hiện đoạn code trong anonymous function được gán vào trường <code>Action</code> của struct <code>cli.Command</code>. Ngoài ra với command <code>addblock</code> thì cần phải truyền data của block mới vào cho chương trình nên ta cần định nghĩa thêm 1 flag riêng để có thể thực hiện việc này bằng cách sử dụng trường <code>Flags</code>. Bạn đọc có thể tham khảo thêm ý nghĩa các trường khác và cách dùng ở trong tài liệu của <code>urfave/cli</code>.</p>
<pre><code class="language-go">app.Commands = []cli.Command{
	{
		Name:    &quot;addblock&quot;,
        Flags: ...
        Action: func(c *cli.Context) error {
            ...
        }
	},
	{
		Name:    &quot;printchain&quot;,
		...
        Action:  func(c *cli.Context) error {
            ...
        }
	},
}
</code></pre>
<p>Bây giờ, ta sẽ thử chạy chương trình lần đầu tiên với không 1 command nào được truyền vào.</p>
<pre><code>$ ./gochain                                                                                                                      
NAME:
   Gochain - A blockchain in Golang

USAGE:
   gochain [global options] command [command options] [arguments...]

VERSION:
   0.0.0

DESCRIPTION:
   A blockchain in Golang

COMMANDS:
     addblock, ab   add a new block to the chain
     printchain, p  print all blocks in the chain
     help, h        Shows a list of commands or help for one command

GLOBAL OPTIONS:
   --help, -h     show help
   --version, -v  print the version
</code></pre>
<p>Ta có thể thấy khi chạy lần đầu tiên, genesis block sẽ được đào và add vào blockchain và khi không có command nào được truyền vào, nhờ thư viên <code>urfave/cli</code> ta có một giao diện hướng dẫn rất đẹp và trực quan.</p>
<p>Tiếp theo thử add một block mới vào blockchain xem sao</p>
<pre><code>$ ./gochain addblock -d &quot;Linh Dep Trai&quot;                                                                                          
Mining the block containing &quot;Linh Dep Trai&quot;
0000a37bd73cf8687a03f9df39b7d4b2dde7d8cb7d409428fc48b6ff8d53c0ed


Done adding new block to chain!
$./gochain addblock -d &quot;Linh Dep Trai 2&quot;                                                                                        
Mining the block containing &quot;Linh Dep Trai 2&quot;
0000f2db38fddfbb37f4819a2bf8fd013f31c55dcb413365ca3c1327ea8b1ad2


Done adding new block to chain!⏎
</code></pre>
<p>Ta có thể xem lại thông tin của các blocks vừa được add bằng command <code>printchain</code></p>
<pre><code>$ ./gochain printchain                                                                                                           
Prev block's hash: 0000a37bd73cf8687a03f9df39b7d4b2dde7d8cb7d409428fc48b6ff8d53c0ed
Current block's hash: 0000f2db38fddfbb37f4819a2bf8fd013f31c55dcb413365ca3c1327ea8b1ad2
Current block's data: Linh Dep Trai 2
PoW: true

Prev block's hash: 0000fc08f8dd06ab30990f649bcd8ebf9bd3ad4bc44c8716b98cff59e757ac09
Current block's hash: 0000a37bd73cf8687a03f9df39b7d4b2dde7d8cb7d409428fc48b6ff8d53c0ed
Current block's data: Linh Dep Trai
PoW: true

Prev block's hash:
Current block's hash: 0000fc08f8dd06ab30990f649bcd8ebf9bd3ad4bc44c8716b98cff59e757ac09
Current block's data: Genesis Block
PoW: true
</code></pre>
<p>Data của blockchain đã được lưu tại folder <code>/tmp/gochain</code> như trong setting khi khởi tạo Badger:</p>
<pre><code>$ ls /tmp/gochain/                                                  
000000.vlog 000006.sst  MANIFEST
</code></pre>
<h3 id="ktlun">Kết luận</h3>
<p>Kết thúc phần này, chương trình blockchain của chúng ta đã có một giao diện CLI khá ổn với data được lưu trữ trên hard disk, có thể được ghi và đọc lại nhiều lần giữa các lần chạy. Phần tiếp theo chúng ta sẽ add thêm chức năng xử lý transaction, tính năng quan trọng của một blockchain hoàn chỉnh.</p>
<h3 id="thamkho">Tham khảo</h3>
<ul>
<li><a href="https://jeiwan.cc/posts/building-blockchain-in-go-part-3/">https://jeiwan.cc/posts/building-blockchain-in-go-part-3/</a></li>
<li><a href="https://en.bitcoin.it/wiki/Bitcoin_Core_0.11_(ch_2):_Data_Storage">https://en.bitcoin.it/wiki/Bitcoin_Core_0.11_(ch_2):_Data_Storage</a></li>
<li><a href="https://github.com/urfave/cli">https://github.com/urfave/cli</a></li>
<li><a href="https://github.com/dgraph-io/badger">https://github.com/dgraph-io/badger</a></li>
</ul>
<!--kg-card-end: markdown-->
            </section>

            <div class="post-footer">
                <div class="share-button">
                    <div class="fb-share-button" data-href="/blogchain-su-dung-ngon-ngu-go/" data-layout="button_count" data-size="large" data-mobile-iframe="true">
                    </div>
                </div>

                <div class="share-button">
                    <a class="twitter-share-button" data-size="large" href="https://twitter.com/intent/tweet?text=Blogchain%20b%E1%BA%B1ng%20ng%C3%B4n%20ng%E1%BB%AF%20Go%20-%203rd%20Step%3A%20L%C6%B0u%20tr%E1%BB%AF%20data%20tr%C3%AAn%20%E1%BB%95%20c%E1%BB%A9ng%20v%C3%A0%20giao%20di%E1%BB%87n%20CLI">
                        Tweet
                    </a>
                </div>

                <div class="share-button">
                    <div class="g-plusone" data-href="/blogchain-su-dung-ngon-ngu-go/"></div>
                </div>
            </div>
            <div id="widget-for-reem-10-1"></div><script src="https://reem.vn/reem.js?m=10"></script>
        </article>


        <div class="post-comments">
            <div class="fb-comments" data-href="https://blog.vietnamlab.vn/blogchain-su-dung-ngon-ngu-go/" data-numposts="10" data-order-by="reverse_time" data-width="100%"></div>
        </div>
</div>
<div class="col-lg-3">
    <div id="sidebar">

    <gcse:search></gcse:search>

    <div class='sidebar-box'>
        <div id="widget-for-reem-4-1"></div><script src="https://163.44.192.76/rem.js?m=4"></script>
    </div>
    <div class="sidebar-box">
        <div class="sidebar-title h2">Tuyển dụng</div>
        <div class="sidebar-content">
          <a class="title" href="https://blog.vietnamlab.vn/tuyen-dung">
            <img
              style="max-width: 100%"
              src="https://drive.google.com/uc?id=1aYKdTvr-4CYterc6pPPBYoFezghrkGZf"
              alt="Tuyển dụng">
          </a>
        </div>
    </div>

    <div class="sidebar-box">
        <div class="sidebar-title h2">Facebook</div>
        <div class="sidebar-content">
            <div class="fb-page" data-href="https://www.facebook.com/vietnamlab.vn" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-width="500" data-show-facepile="true">
                <blockquote cite="https://www.facebook.com/vietnamlab.vn" class="fb-xfbml-parse-ignore">
                    <a href="https://www.facebook.com/vietnamlab.vn">GMO-Z.com Vietnam Lab Center</a>
                </blockquote>
            </div>
        </div>
    </div>

    <div class="sidebar-box">
        <div class="sidebar-title h2">Mục lục</div>
        <div class="sidebar-content js-toc"></div>
    </div>

    
    <div class="sidebar-box">
        <div class="sidebar-title h2">Tin tức</div>
        <div class="sidebar-content">
                    <div class="media">
                        <div class="media-left">
                            <a href="../bao-cao-nghien-cuu-quy-3/index.html">
                                    <img style="object-fit: cover" class="media-object" src="../content/images/1CSKMZA-hwBOtsfRK0JjjcNZUrF80lGLt.PNG" width="50" height="50" alt="Báo cáo nghiên cứu quý 3 năm 2020">
                            </a>
                        </div>
                        <div class="media-body">
                            <a class="title" href="../bao-cao-nghien-cuu-quy-3/index.html">Báo cáo nghiên cứu quý 3 năm 2020</a>
                            <span>, 30 October 2020</span>
                        </div>
                    </div>
                    <div class="media">
                        <div class="media-left">
                            <a href="../untitled-9/index.html">
                                    <img style="object-fit: cover" class="media-object" src="https://drive.google.com/uc?id&#x3D;19caFAeGojP08PERt9NhyH-tZln5o1dyt&amp;export&#x3D;download" width="50" height="50" alt="Rộn ràng đón tết trung thu 2020">
                            </a>
                        </div>
                        <div class="media-body">
                            <a class="title" href="../untitled-9/index.html">Rộn ràng đón tết trung thu 2020</a>
                            <span>, 25 September 2020</span>
                        </div>
                    </div>
                    <div class="media">
                        <div class="media-left">
                            <a href="../truyen-thong-hoc-tieng-nhat/index.html">
                                    <img style="object-fit: cover" class="media-object" src="https://drive.google.com/uc?id&#x3D;19mB9PZcsjUoxU5mbNYE49Ai0dMUlOPt8&amp;export&#x3D;download" width="50" height="50" alt="Truyền Thống học tiếng Nhật tại VNLAB.">
                            </a>
                        </div>
                        <div class="media-body">
                            <a class="title" href="../truyen-thong-hoc-tieng-nhat/index.html">Truyền Thống học tiếng Nhật tại VNLAB.</a>
                            <span>, 14 August 2020</span>
                        </div>
                    </div>
                    <div class="media">
                        <div class="media-left">
                            <a href="../team-building-vuon-quoc-gia-ba-vi-2020/index.html">
                                    <img style="object-fit: cover" class="media-object" src="https://drive.google.com/uc?id&#x3D;1vCDL4ACVJLRYbc_bMUF-XtOkBYCmlvFL&amp;export&#x3D;download" width="50" height="50" alt="Team Building Vườn Quốc Gia Ba Vì 2020">
                            </a>
                        </div>
                        <div class="media-body">
                            <a class="title" href="../team-building-vuon-quoc-gia-ba-vi-2020/index.html">Team Building Vườn Quốc Gia Ba Vì 2020</a>
                            <span>, 30 June 2020</span>
                        </div>
                    </div>
                    <div class="media">
                        <div class="media-left">
                            <a href="../bao-cao-nghien-cuu-quy-1-nam-2020/index.html">
                                    <img style="object-fit: cover" class="media-object" src="https://drive.google.com/uc?id&#x3D;13zVnT-6TUc6EkCcZox_nn2PHeBSxihYm&amp;export&#x3D;download" width="50" height="50" alt="Báo cáo nghiên cứu Quý 1 năm 2020">
                            </a>
                        </div>
                        <div class="media-body">
                            <a class="title" href="../bao-cao-nghien-cuu-quy-1-nam-2020/index.html">Báo cáo nghiên cứu Quý 1 năm 2020</a>
                            <span>, 20 April 2020</span>
                        </div>
                    </div>
        </div>
    </div>

    <div class="sidebar-box">
        <div class="sidebar-title h2">Key words</div>
        <div class="sidebar-content">
                    <span class="label label-default text-justify tag">
                        <a href="../tag/%2508google-apps-script/index.html" title="google apps script" class="tag tag-5c2c443cc00d970001d28829 google-apps-script">google apps script</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="https://blog.vietnamlab.vn/404/" title="#api" class="tag tag-5e813cddf7370d0001b812c4 hash-api">#api</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="https://blog.vietnamlab.vn/404/" title="#drakov" class="tag tag-5ad30b8d83719800014583ed drakov">#drakov</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="https://blog.vietnamlab.vn/404/" title="#mock" class="tag tag-5e798cb6f7370d0001b812ae hash-mock">#mock</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="https://blog.vietnamlab.vn/404/" title="#test" class="tag tag-5e798cb6f7370d0001b812af hash-test">#test</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="https://blog.vietnamlab.vn/404/" title="#web" class="tag tag-5e813cddf7370d0001b812c5 hash-web">#web</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/10-meo-2/index.html" title="10 mẹo" class="tag tag-5ad30b8d837198000145843b 10-meo-2">10 mẹo</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/10-tips/index.html" title="10 tips" class="tag tag-5ad30b8d8371980001458432 10-tips">10 tips</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/2017/index.html" title="2017" class="tag tag-5ad30b8d8371980001458463 2017">2017</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/2018/index.html" title="2018" class="tag tag-5ad30b8d8371980001458464 2018">2018</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/2020/index.html" title="2020" class="tag tag-5e05cac4bf919d0001802e79 2020">2020</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/adaptive-threshold/index.html" title="adaptive threshold" class="tag tag-5ad30b8d8371980001458462 adaptive-threshold">adaptive threshold</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/adb/index.html" title="adb" class="tag tag-5d479f1fbf919d00018028c9 adb">adb</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/adsense/index.html" title="adsense" class="tag tag-5ad30b8d83719800014583a8 adsense">adsense</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/aff/index.html" title="aff" class="tag tag-5b6119898371980001458b0d aff">aff</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/agile/index.html" title="agile" class="tag tag-5ad30b8d837198000145834b agile">agile</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/ai/index.html" title="AI" class="tag tag-5ad30b8d8371980001458441 ai">AI</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/alert/index.html" title="alert" class="tag tag-5c2c443cc00d970001d2882a alert">alert</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/algorithm/index.html" title="Algorithm" class="tag tag-5e3bb937f7370d0001b8122e algorithm">Algorithm</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/android/index.html" title="android" class="tag tag-5ad30b8d837198000145834c android">android</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/android-studio/index.html" title="android studio" class="tag tag-5ad30b8d83719800014583ce android-studio">android studio</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/anguar-cli/index.html" title="anguar cli" class="tag tag-5ad30b8d837198000145834d anguar-cli">anguar cli</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/angular2/index.html" title="angular2" class="tag tag-5ad30b8d837198000145834e angular2">angular2</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/angular9/index.html" title="angular9" class="tag tag-5ea7b0b5f7370d0001b8132d angular9">angular9</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/ansible/index.html" title="Ansible" class="tag tag-5ad30b8d8371980001458450 ansible">Ansible</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/ant/index.html" title="ant" class="tag tag-5ad30b8d8371980001458398 ant">ant</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/apache/index.html" title="apache" class="tag tag-5ad30b8d837198000145834f apache">apache</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/apache-hive/index.html" title="Apache Hive" class="tag tag-5ad30b8d8371980001458351 apache-hive">Apache Hive</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/apache-knox/index.html" title="Apache Knox" class="tag tag-5ad30b8d8371980001458352 apache-knox">Apache Knox</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/apache-knox-gateway/index.html" title="Apache Knox Gateway" class="tag tag-5ad30b8d8371980001458353 apache-knox-gateway">Apache Knox Gateway</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/apache-poi/index.html" title="Apache POI" class="tag tag-5ad30b8d83719800014583d4 apache-poi">Apache POI</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/api/index.html" title="api" class="tag tag-5ad30b8d83719800014583c1 api">api</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/apiary-editor/index.html" title="apiary editor" class="tag tag-5ad30b8d83719800014583bf apiary-editor">apiary editor</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/application/index.html" title="application" class="tag tag-5bc99b038f5b6d0001832bfa application">application</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/ar/index.html" title="ar" class="tag tag-5ad30b8d8371980001458404 ar">ar</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/artoolkit/index.html" title="artoolkit" class="tag tag-5ad30b8d8371980001458405 artoolkit">artoolkit</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/aso/index.html" title="aso" class="tag tag-5b6119898371980001458b08 aso">aso</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/association-rules/index.html" title="Association Rules" class="tag tag-5ad30b8d83719800014583c5 association-rules">Association Rules</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/asynchronous/index.html" title="asynchronous" class="tag tag-5ad30b8d8371980001458355 asynchronous">asynchronous</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/atom/index.html" title="atom" class="tag tag-5ad30b8d83719800014583fd atom">atom</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/autoencoder/index.html" title="autoencoder" class="tag tag-5bfa780f165b57000125175c autoencoder">autoencoder</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/automation-testing/index.html" title="automation testing" class="tag tag-5ad30b8d83719800014583fe automation-testing">automation testing</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/awk/index.html" title="awk" class="tag tag-5ad30b8d8371980001458356 awk">awk</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/aws/index.html" title="AWS" class="tag tag-5ee65390f7370d0001b813e7 aws">AWS</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/aws-certified/index.html" title="AWS Certified" class="tag tag-5f262d1bf7370d0001b8146b aws-certified">AWS Certified</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/backend/index.html" title="backend" class="tag tag-5b30687483719800014589a0 backend">backend</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/backend2018/index.html" title="backend2018" class="tag tag-5b30687483719800014589a1 backend2018">backend2018</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/bao-cao/index.html" title="báo cáo" class="tag tag-5f9a48c4128d0900010f5c3f bao-cao">báo cáo</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/basictype/index.html" title="BasicType" class="tag tag-5ad30b8d83719800014583d9 basictype">BasicType</a>
                    </span>
                    <span class="label label-default text-justify tag">
                        <a href="../tag/bcrypt/index.html" title="bcrypt" class="tag tag-5d96a6f2bf919d0001802d24 bcrypt">bcrypt</a>
                    </span>
        </div>
    </div>
</div>
</div>
<div class="col-lg-offset-1"></div>


    </div>

    <div id="footer">
        <div class="row">
            <div class="col-lg-offset-1 col-lg-10 copyright">
                <a href="../index.html">GMO-Z.com Vietnam Lab Center Technology Blog</a> &copy; 2020
            </div>
            <div class="col-lg-offset-1"></div>
        </div>
    </div>

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-166653304-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-166653304-2');
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59342535-1', 'auto');
  ga('send', 'pageview');
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)']]
  },
  svg: {
    fontCache: 'global'
  }
};
</script>

<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Libraries -->
    <script type="text/javascript" src="../assets/js/libs/jquery.fitvids.min.js?v=52156bd6b0"></script>
    <script type="text/javascript" src="../assets/js/libs/tocbot.min.js?v=52156bd6b0"></script>
    <script type="text/javascript" src="../assets/js/libs/bootstrap.min.js?v=52156bd6b0"></script>
    <script type="text/javascript" src="../assets/js/libs/highlight.pack.js?v=52156bd6b0"></script>

    <!-- Custom JS -->
    <script type="text/javascript" src="../assets/js/app/index.js?v=52156bd6b0"></script>

    <!-- App Services -->
    <script type="text/javascript" charset="UTF-8" src="https://cache.img.gmo.jp/common_header/script.js" async></script>
    <script src="https://apis.google.com/js/platform.js" async defer>{ lang: 'vi' }</script>

</body>

</html>